const URL=new URLs;let Hot_topics=true,Most_visited=false,colorfulDms=false,commandDms=true;typeof $loon!=="undefined"&&(Hot_topics=$persistentStore.read("去除动态综合页热门话题")==="开启",Most_visited=$persistentStore.read("去除动态综合页最常访问")==="开启",colorfulDms=$persistentStore.read("会员弹幕替换为普通弹幕")==="开启",commandDms=$persistentStore.read("去除交互式弹幕")==="开启");(async()=>{let e=URL.parse($request?.url);const t=e?.host,n=e?.path,i=n.split("/");const r=($response?.headers?.["Content-Type"]??$response?.headers?.["content-type"])?.split(";")?.[0];let a={code:0,message:"0",data:{}};switch(r){case undefined:break;case"application/x-protobuf":case"application/grpc":case"application/grpc+proto":case"applecation/octet-stream":let q=$response.body;!function(e){"use strict";function t(e,t,n){return t<=e&&e<=n}"undefined"!=typeof module&&module.exports&&!e["encoding-indexes"]&&(e["encoding-indexes"]=require("./encoding-indexes.js")["encoding-indexes"]);var n=Math.floor;function i(e){if(void 0===e)return{};if(e===Object(e))return e;throw TypeError("Could not convert argument to dictionary")}function r(e){return 0<=e&&e<=127}var a=r,s=-1;function o(e){this.tokens=[].slice.call(e),this.tokens.reverse()}o.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.pop():s},prepend:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.push(t.pop());else this.tokens.push(e)},push:function(e){if(Array.isArray(e))for(var t=e;t.length;)this.tokens.unshift(t.shift());else this.tokens.unshift(e)}};var l=-1;function h(e,t){if(e)throw TypeError("Decoder error");return t||65533}function f(e){throw TypeError("The code point "+e+" could not be encoded.")}function u(e){return e=String(e).trim().toLowerCase(),Object.prototype.hasOwnProperty.call(m,e)?m[e]:null}var c,d,p=[{encodings:[{labels:["unicode-1-1-utf-8","utf-8","utf8"],name:"UTF-8"}],heading:"The Encoding"},{encodings:[{labels:["866","cp866","csibm866","ibm866"],name:"IBM866"},{labels:["csisolatin2","iso-8859-2","iso-ir-101","iso8859-2","iso88592","iso_8859-2","iso_8859-2:1987","l2","latin2"],name:"ISO-8859-2"},{labels:["csisolatin3","iso-8859-3","iso-ir-109","iso8859-3","iso88593","iso_8859-3","iso_8859-3:1988","l3","latin3"],name:"ISO-8859-3"},{labels:["csisolatin4","iso-8859-4","iso-ir-110","iso8859-4","iso88594","iso_8859-4","iso_8859-4:1988","l4","latin4"],name:"ISO-8859-4"},{labels:["csisolatincyrillic","cyrillic","iso-8859-5","iso-ir-144","iso8859-5","iso88595","iso_8859-5","iso_8859-5:1988"],name:"ISO-8859-5"},{labels:["arabic","asmo-708","csiso88596e","csiso88596i","csisolatinarabic","ecma-114","iso-8859-6","iso-8859-6-e","iso-8859-6-i","iso-ir-127","iso8859-6","iso88596","iso_8859-6","iso_8859-6:1987"],name:"ISO-8859-6"},{labels:["csisolatingreek","ecma-118","elot_928","greek","greek8","iso-8859-7","iso-ir-126","iso8859-7","iso88597","iso_8859-7","iso_8859-7:1987","sun_eu_greek"],name:"ISO-8859-7"},{labels:["csiso88598e","csisolatinhebrew","hebrew","iso-8859-8","iso-8859-8-e","iso-ir-138","iso8859-8","iso88598","iso_8859-8","iso_8859-8:1988","visual"],name:"ISO-8859-8"},{labels:["csiso88598i","iso-8859-8-i","logical"],name:"ISO-8859-8-I"},{labels:["csisolatin6","iso-8859-10","iso-ir-157","iso8859-10","iso885910","l6","latin6"],name:"ISO-8859-10"},{labels:["iso-8859-13","iso8859-13","iso885913"],name:"ISO-8859-13"},{labels:["iso-8859-14","iso8859-14","iso885914"],name:"ISO-8859-14"},{labels:["csisolatin9","iso-8859-15","iso8859-15","iso885915","iso_8859-15","l9"],name:"ISO-8859-15"},{labels:["iso-8859-16"],name:"ISO-8859-16"},{labels:["cskoi8r","koi","koi8","koi8-r","koi8_r"],name:"KOI8-R"},{labels:["koi8-ru","koi8-u"],name:"KOI8-U"},{labels:["csmacintosh","mac","macintosh","x-mac-roman"],name:"macintosh"},{labels:["dos-874","iso-8859-11","iso8859-11","iso885911","tis-620","windows-874"],name:"windows-874"},{labels:["cp1250","windows-1250","x-cp1250"],name:"windows-1250"},{labels:["cp1251","windows-1251","x-cp1251"],name:"windows-1251"},{labels:["ansi_x3.4-1968","ascii","cp1252","cp819","csisolatin1","ibm819","iso-8859-1","iso-ir-100","iso8859-1","iso88591","iso_8859-1","iso_8859-1:1987","l1","latin1","us-ascii","windows-1252","x-cp1252"],name:"windows-1252"},{labels:["cp1253","windows-1253","x-cp1253"],name:"windows-1253"},{labels:["cp1254","csisolatin5","iso-8859-9","iso-ir-148","iso8859-9","iso88599","iso_8859-9","iso_8859-9:1989","l5","latin5","windows-1254","x-cp1254"],name:"windows-1254"},{labels:["cp1255","windows-1255","x-cp1255"],name:"windows-1255"},{labels:["cp1256","windows-1256","x-cp1256"],name:"windows-1256"},{labels:["cp1257","windows-1257","x-cp1257"],name:"windows-1257"},{labels:["cp1258","windows-1258","x-cp1258"],name:"windows-1258"},{labels:["x-mac-cyrillic","x-mac-ukrainian"],name:"x-mac-cyrillic"}],heading:"Legacy single-byte encodings"},{encodings:[{labels:["chinese","csgb2312","csiso58gb231280","gb2312","gb_2312","gb_2312-80","gbk","iso-ir-58","x-gbk"],name:"GBK"},{labels:["gb18030"],name:"gb18030"}],heading:"Legacy multi-byte Chinese (simplified) encodings"},{encodings:[{labels:["big5","big5-hkscs","cn-big5","csbig5","x-x-big5"],name:"Big5"}],heading:"Legacy multi-byte Chinese (traditional) encodings"},{encodings:[{labels:["cseucpkdfmtjapanese","euc-jp","x-euc-jp"],name:"EUC-JP"},{labels:["csiso2022jp","iso-2022-jp"],name:"ISO-2022-JP"},{labels:["csshiftjis","ms932","ms_kanji","shift-jis","shift_jis","sjis","windows-31j","x-sjis"],name:"Shift_JIS"}],heading:"Legacy multi-byte Japanese encodings"},{encodings:[{labels:["cseuckr","csksc56011987","euc-kr","iso-ir-149","korean","ks_c_5601-1987","ks_c_5601-1989","ksc5601","ksc_5601","windows-949"],name:"EUC-KR"}],heading:"Legacy multi-byte Korean encodings"},{encodings:[{labels:["csiso2022kr","hz-gb-2312","iso-2022-cn","iso-2022-cn-ext","iso-2022-kr"],name:"replacement"},{labels:["utf-16be"],name:"UTF-16BE"},{labels:["utf-16","utf-16le"],name:"UTF-16LE"},{labels:["x-user-defined"],name:"x-user-defined"}],heading:"Legacy miscellaneous encodings"}],m={},w=(p.forEach((function(e){e.encodings.forEach((function(e){e.labels.forEach((function(t){m[t]=e}))}))})),{}),g={};function b(e,t){return t&&t[e]||null}function y(e,t){t=t.indexOf(e);return-1===t?null:t}function _(t){if("encoding-indexes"in e)return e["encoding-indexes"][t];throw Error("Indexes missing. Did you forget to include encoding-indexes.js first?")}var k="utf-8";function v(e,t){if(!(this instanceof v))throw TypeError("Called as a function. Did you forget 'new'?");e=void 0!==e?String(e):k,t=i(t),this._encoding=null,this._decoder=null,this._ignoreBOM=!1,this._BOMseen=!1,this._error_mode="replacement",this._do_not_flush=!1;var n=u(e);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+e);if(g[n.name])return(e=this)._encoding=n,Boolean(t.fatal)&&(e._error_mode="fatal"),Boolean(t.ignoreBOM)&&(e._ignoreBOM=!0),Object.defineProperty||(this.encoding=e._encoding.name.toLowerCase(),this.fatal="fatal"===e._error_mode,this.ignoreBOM=e._ignoreBOM),e;throw Error("Decoder not present. Did you forget to include encoding-indexes.js first?")}function T(t,n){if(!(this instanceof T))throw TypeError("Called as a function. Did you forget 'new'?");n=i(n),this._encoding=null,this._encoder=null,this._do_not_flush=!1,this._fatal=Boolean(n.fatal)?"fatal":"replacement";if(Boolean(n.NONSTANDARD_allowLegacyEncoding)){n=u(t=void 0!==t?String(t):k);if(null===n||"replacement"===n.name)throw RangeError("Unknown encoding: "+t);if(!w[n.name])throw Error("Encoder not present. Did you forget to include encoding-indexes.js first?");this._encoding=n}else this._encoding=u("utf-8"),void 0!==t&&"console"in e&&console.warn("TextEncoder constructor called with encoding label, which is ignored.");return Object.defineProperty||(this.encoding=this._encoding.name.toLowerCase()),this}function N(e){var n=e.fatal,i=0,r=0,a=0,o=128,f=191;this.handler=function(e,u){if(u===s&&0!==a)return a=0,h(n);if(u===s)return l;if(0===a){if(t(u,0,127))return u;if(t(u,194,223))a=1,i=31&u;else if(t(u,224,239))224===u&&(o=160),237===u&&(f=159),a=2,i=15&u;else{if(!t(u,240,244))return h(n);240===u&&(o=144),244===u&&(f=143),a=3,i=7&u}return null}var c;return t(u,o,f)?(o=128,f=191,i=i<<6|63&u,(r+=1)!==a?null:(c=i,i=a=r=0,c)):(i=a=r=0,o=128,f=191,e.prepend(u),h(n))}}function B(e){e.fatal;this.handler=function(e,n){if(n===s)return l;if(a(n))return n;t(n,128,2047)?(i=1,r=192):t(n,2048,65535)?(i=2,r=224):t(n,65536,1114111)&&(i=3,r=240);for(var i,r,o=[(n>>6*i)+r];0<i;)o.push(128|63&n>>6*(i-1)),--i;return o}}function E(e,t){var n=t.fatal;this.handler=function(t,i){return i===s?l:r(i)?i:null===(i=e[i-128])?h(n):i}}function U(e,t){t.fatal;this.handler=function(t,n){var i;return n===s?l:a(n)?n:(null===(i=y(n,e))&&f(n),i+128)}}function x(e){var n=e.fatal,i=0,a=0,o=0;this.handler=function(e,f){var u,c,d;return f===s&&0===i&&0===a&&0===o?l:(f!==s||0===i&&0===a&&0===o||(o=a=i=0,h(n)),0!==o?(u=null,t(f,48,57)&&(u=function(e){if(39419<e&&e<189e3||1237575<e)return null;if(7457===e)return 59335;for(var t=0,n=0,i=_("gb18030-ranges"),r=0;r<i.length;++r){var a=i[r];if(!(a[0]<=e))break;t=a[0],n=a[1]}return n+e-t}(10*(126*(10*(i-129)+a-48)+o-129)+f-48)),c=[a,o,f],o=a=i=0,null===u?(e.prepend(c),h(n)):u):0!==a?t(f,129,254)?(o=f,null):(e.prepend([a,f]),a=i=0,h(n)):0!==i?t(f,48,57)?(a=f,null):(c=i,i=0,(d=null)===(u=null===(d=t(f,64,126)||t(f,128,254)?190*(c-129)+(f-(f<127?64:65)):d)?null:b(d,_("gb18030")))&&r(f)&&e.prepend(f),null===u?h(n):u):r(f)?f:128===f?8364:t(f,129,254)?(i=f,null):h(n))}}function I(e,t){e.fatal;this.handler=function(e,i){var r,o;return i===s?l:a(i)?i:58853===i?f(i):t&&8364===i?128:null!==(r=y(i,_("gb18030")))?(o=r%190,[n(r/190)+129,o+(o<63?64:65)]):t?f(i):(r=function(e){if(59335===e)return 7457;for(var t=0,n=0,i=_("gb18030-ranges"),r=0;r<i.length;++r){var a=i[r];if(!(a[1]<=e))break;t=a[1],n=a[0]}return n+e-t}(i),[(o=n(r/10/126/10))+129,(i=n((r-=10*o*126*10)/10/126))+48,(o=n((r-=10*i*126)/10))+129,48+(r-10*o)])}}function R(e){var n=e.fatal,i=0;this.handler=function(e,a){if(a===s&&0!==i)return i=0,h(n);if(a===s&&0===i)return l;if(0===i)return r(a)?a:t(a,129,254)?(i=a,null):h(n);var o=i,f=null;switch(i=0,f=t(a,64,126)||t(a,161,254)?157*(o-129)+(a-(a<127?64:98)):f){case 1133:return[202,772];case 1135:return[202,780];case 1164:return[234,772];case 1166:return[234,780]}o=null===f?null:b(f,_("big5"));return null===o&&r(a)&&e.prepend(a),null===o?h(n):o}}function O(e){e.fatal;this.handler=function(e,t){var i,r;return t===s?l:a(t)?t:(i=t,r=d=d||_("big5").map((function(e,t){return t<5024?null:e})),null===(i=9552===i||9566===i||9569===i||9578===i||21313===i||21317===i?r.lastIndexOf(i):y(i,r))||(r=n(i/157)+129)<161?f(t):[r,(t=i%157)+(t<63?64:98)])}}function A(e){var n=e.fatal,i=!1,a=0;this.handler=function(e,o){var f,u;return o===s&&0!==a?(a=0,h(n)):o===s&&0===a?l:142===a&&t(o,161,223)?(a=0,65216+o):143===a&&t(o,161,254)?(i=!0,a=o,null):0!==a?(f=a,a=0,u=null,t(f,161,254)&&t(o,161,254)&&(u=b(94*(f-161)+(o-161),_(i?"jis0212":"jis0208"))),i=!1,t(o,161,254)||e.prepend(o),null===u?h(n):u):r(o)?o:142===o||143===o||t(o,161,254)?(a=o,null):h(n)}}function D(e){e.fatal;this.handler=function(e,i){var r;return i===s?l:a(i)?i:165===i?92:8254===i?126:t(i,65377,65439)?[142,i-65377+161]:null===(r=y(i=8722===i?65293:i,_("jis0208")))?f(i):[n(r/94)+161,r%94+161]}}function S(e){var n=e.fatal,i=0,r=1,a=2,o=3,f=4,u=5,c=6,d=i,p=i,m=0,w=!1;this.handler=function(e,g){switch(d){default:case i:return 27===g?(d=u,null):t(g,0,127)&&14!==g&&15!==g&&27!==g?(w=!1,g):g===s?l:(w=!1,h(n));case r:return 27===g?(d=u,null):92===g?(w=!1,165):126===g?(w=!1,8254):t(g,0,127)&&14!==g&&15!==g&&27!==g&&92!==g&&126!==g?(w=!1,g):g===s?l:(w=!1,h(n));case a:return 27===g?(d=u,null):t(g,33,95)?(w=!1,65344+g):g===s?l:(w=!1,h(n));case o:return 27===g?(d=u,null):t(g,33,126)?(w=!1,m=g,d=f,null):g===s?l:(w=!1,h(n));case f:if(27===g)d=u;else{if(t(g,33,126))return d=o,null===(y=b(94*(m-33)+g-33,_("jis0208")))?h(n):y;g===s?(d=o,e.prepend(g)):d=o}return h(n);case u:return 36===g||40===g?(m=g,d=c,null):(e.prepend(g),w=!1,d=p,h(n));case c:var y=m,k=(m=0,null);return(40===y&&66===g&&(k=i),40===y&&74===g&&(k=r),40===y&&73===g&&(k=a),null!==(k=36!==y||64!==g&&66!==g?k:o))?(d=k,k=w,w=!0,k?h(n):null):(e.prepend([y,g]),w=!1,d=p,h(n))}}}function L(e){e.fatal;var t=0,i=1,r=2,o=t;this.handler=function(e,h){if(h===s&&o!==t)return e.prepend(h),o=t,[27,40,66];if(h===s&&o===t)return l;if(!(o!==t&&o!==i||14!==h&&15!==h&&27!==h))return f(65533);if(o===t&&a(h))return h;if(o===i&&(a(h)&&92!==h&&126!==h||165==h||8254==h)){if(a(h))return h;if(165===h)return 92;if(8254===h)return 126}var u;return a(h)&&o!==t?(e.prepend(h),o=t,[27,40,66]):165!==h&&8254!==h||o===i?null===(u=y(h=8722===h?65293:h,_("jis0208")))?f(h):o!==r?(e.prepend(h),o=r,[27,36,66]):[n(u/94)+33,u%94+33]:(e.prepend(h),o=i,[27,40,74])}}function F(e){var n=e.fatal,i=0;this.handler=function(e,a){var o,f;return a===s&&0!==i?(i=0,h(n)):a===s&&0===i?l:0!==i?(f=i,o=null,i=0,(t(a,64,126)||t(a,128,252))&&(o=188*(f-(f<160?129:193))+a-(a<127?64:65)),t(o,8836,10715)?48508+o:(null===(f=null===o?null:b(o,_("jis0208")))&&r(a)&&e.prepend(a),null===f?h(n):f)):r(a)||128===a?a:t(a,161,223)?65216+a:t(a,129,159)||t(a,224,252)?(i=a,null):h(n)}}function j(e){e.fatal;this.handler=function(e,i){var r;return i===s?l:a(i)||128===i?i:165===i?92:8254===i?126:t(i,65377,65439)?i-65377+161:(r=i=8722===i?65293:i,null===(r=(c=c||_("jis0208").map((function(e,n){return t(n,8272,8835)?null:e}))).indexOf(r))?f(i):[(i=n(r/188))+(i<31?129:193),(i=r%188)+(i<63?64:65)])}}function z(e){var n=e.fatal,i=0;this.handler=function(e,a){var o,f;return a===s&&0!==i?(i=0,h(n)):a===s&&0===i?l:0!==i?(f=i,i=0,f=(o=null)===(o=t(a,65,254)?190*(f-129)+(a-65):o)?null:b(o,_("euc-kr")),null===o&&r(a)&&e.prepend(a),null===f?h(n):f):r(a)?a:t(a,129,254)?(i=a,null):h(n)}}function C(e){e.fatal;this.handler=function(e,t){var i;return t===s?l:a(t)?t:null===(i=y(t,_("euc-kr")))?f(t):[n(i/190)+129,i%190+65]}}function $(e,t){var n=e>>8,e=255&e;return t?[n,e]:[e,n]}function W(e,n){var i=n.fatal,r=null,a=null;this.handler=function(n,o){var f;return o!==s||null===r&&null===a?o===s&&null===r&&null===a?l:null===r?(r=o,null):(o=e?(r<<8)+o:(o<<8)+r,(r=null)!==a?(f=a,a=null,t(o,56320,57343)?65536+1024*(f-55296)+(o-56320):(n.prepend($(o,e)),h(i))):t(o,55296,56319)?(a=o,null):t(o,56320,57343)?h(i):o):h(i)}}function V(e,n){n.fatal;this.handler=function(n,i){var r;return i===s?l:t(i,0,65535)?$(i,e):(r=$(55296+(i-65536>>10),e),i=$(56320+(i-65536&1023),e),r.concat(i))}}function Z(e){e.fatal;this.handler=function(e,t){return t===s?l:r(t)?t:63360+t-128}}function P(e){e.fatal;this.handler=function(e,n){return n===s?l:a(n)?n:t(n,63360,63487)?n-63360+128:f(n)}}Object.defineProperty&&(Object.defineProperty(v.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),Object.defineProperty(v.prototype,"fatal",{get:function(){return"fatal"===this._error_mode}}),Object.defineProperty(v.prototype,"ignoreBOM",{get:function(){return this._ignoreBOM}})),v.prototype.decode=function(e,t){e="object"==typeof e&&e instanceof ArrayBuffer?new Uint8Array(e):"object"==typeof e&&"buffer"in e&&e.buffer instanceof ArrayBuffer?new Uint8Array(e.buffer,e.byteOffset,e.byteLength):new Uint8Array(0);t=i(t),this._do_not_flush||(this._decoder=g[this._encoding.name]({fatal:"fatal"===this._error_mode}),this._BOMseen=!1),this._do_not_flush=Boolean(t.stream);for(var n,r=new o(e),a=[];;){var h=r.read();if(h===s)break;if((n=this._decoder.handler(r,h))===l)break;null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n))}if(!this._do_not_flush){for(;(n=this._decoder.handler(r,r.read()))!==l&&(null!==n&&(Array.isArray(n)?a.push.apply(a,n):a.push(n)),!r.endOfStream()););this._decoder=null}return function(e){t=["UTF-8","UTF-16LE","UTF-16BE"],n=this._encoding.name,-1===t.indexOf(n)||this._ignoreBOM||this._BOMseen||(0<e.length&&65279===e[0]?(this._BOMseen=!0,e.shift()):0<e.length&&(this._BOMseen=!0));for(var t,n,i=e,r="",a=0;a<i.length;++a){var s=i[a];s<=65535?r+=String.fromCharCode(s):(s-=65536,r+=String.fromCharCode(55296+(s>>10),56320+(1023&s)))}return r}.call(this,a)},Object.defineProperty&&Object.defineProperty(T.prototype,"encoding",{get:function(){return this._encoding.name.toLowerCase()}}),T.prototype.encode=function(e,t){e=void 0===e?"":String(e),t=i(t),this._do_not_flush||(this._encoder=w[this._encoding.name]({fatal:"fatal"===this._fatal})),this._do_not_flush=Boolean(t.stream);for(var n,r=new o(function(e){for(var t=String(e),n=t.length,i=0,r=[];i<n;){var a,s=t.charCodeAt(i);s<55296||57343<s?r.push(s):56320<=s&&s<=57343?r.push(65533):55296<=s&&s<=56319&&(i!==n-1&&56320<=(a=t.charCodeAt(i+1))&&a<=57343?(r.push(65536+((1023&s)<<10)+(1023&a)),i+=1):r.push(65533)),i+=1}return r}(e)),a=[];;){var h=r.read();if(h===s)break;if((n=this._encoder.handler(r,h))===l)break;Array.isArray(n)?a.push.apply(a,n):a.push(n)}if(!this._do_not_flush){for(;;){if((n=this._encoder.handler(r,r.read()))===l)break;Array.isArray(n)?a.push.apply(a,n):a.push(n)}this._encoder=null}return new Uint8Array(a)},w["UTF-8"]=function(e){return new B(e)},g["UTF-8"]=function(e){return new N(e)},"encoding-indexes"in e&&p.forEach((function(e){"Legacy single-byte encodings"===e.heading&&e.encodings.forEach((function(e){var e=e.name,t=_(e.toLowerCase());g[e]=function(e){return new E(t,e)},w[e]=function(e){return new U(t,e)}}))})),g.GBK=function(e){return new x(e)},w.GBK=function(e){return new I(e,!0)},w.gb18030=function(e){return new I(e)},g.gb18030=function(e){return new x(e)},w.Big5=function(e){return new O(e)},g.Big5=function(e){return new R(e)},w["EUC-JP"]=function(e){return new D(e)},g["EUC-JP"]=function(e){return new A(e)},w["ISO-2022-JP"]=function(e){return new L(e)},g["ISO-2022-JP"]=function(e){return new S(e)},w.Shift_JIS=function(e){return new j(e)},g.Shift_JIS=function(e){return new F(e)},w["EUC-KR"]=function(e){return new C(e)},g["EUC-KR"]=function(e){return new z(e)},w["UTF-16BE"]=function(e){return new V(!0,e)},g["UTF-16BE"]=function(e){return new W(!0,e)},w["UTF-16LE"]=function(e){return new V(!1,e)},g["UTF-16LE"]=function(e){return new W(!1,e)},w["x-user-defined"]=function(e){return new P(e)},g["x-user-defined"]=function(e){return new Z(e)},e.TextEncoder||(e.TextEncoder=T),e.TextDecoder||(e.TextDecoder=v),"undefined"!=typeof module&&module.exports&&(module.exports={TextEncoder:e.TextEncoder,TextDecoder:e.TextDecoder,EncodingIndexes:e["encoding-indexes"]})}(this||{});var s,o,l,h,f,u=Object.defineProperty,c=Object.defineProperties,d=Object.getOwnPropertyDescriptors,p=Object.getOwnPropertySymbols,m=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable,g=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,b=(e,t)=>{for(var n in t=t||{})m.call(t,n)&&g(e,n,t[n]);if(p)for(var n of p(t))w.call(t,n)&&g(e,n,t[n]);return e},y=(e,t)=>c(e,d(t));function _(){let e=0,t=0;for(let i=0;i<28;i+=7){var n=this.buf[this.pos++];if(e|=(127&n)<<i,0==(128&n))return this.assertBounds(),[e,t]}var i=this.buf[this.pos++];if(e|=(15&i)<<28,t=(112&i)>>4,0==(128&i))return this.assertBounds(),[e,t];for(let n=3;n<=31;n+=7){var r=this.buf[this.pos++];if(t|=(127&r)<<n,0==(128&r))return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function k(e,t,n){for(let a=0;a<28;a+=7){var i=e>>>a,r=!(i>>>7==0&&0==t);if(n.push(255&(r?128|i:i)),!r)return}var a=e>>>28&15|(7&t)<<4,s=!(t>>3==0);if(n.push(255&(s?128|a:a)),s){for(let e=3;e<31;e+=7){var o=t>>>e,l=!(o>>>7==0);if(n.push(255&(l?128|o:o)),!l)return}n.push(t>>>31&1)}}const Q=4294967296;function v(e){var t="-"==e[0];t&&(e=e.slice(1));let n=0,i=0;function r(t,r){t=Number(e.slice(t,r));i*=1e6,(n=1e6*n+t)>=Q&&(i+=n/Q|0,n%=Q)}return r(-24,-18),r(-18,-12),r(-12,-6),r(-6),[t,n,i]}function T(e,t){if(t<=2097151)return""+(Q*t+e);var n=(e>>>24|t<<8)>>>0&16777215,t=t>>16&65535;let i=(16777215&e)+6777216*n+6710656*t,r=n+8147497*t,a=2*t;e=1e7;function s(e,t){e=e?String(e):"";return t?"0000000".slice(e.length)+e:e}return i>=e&&(r+=Math.floor(i/e),i%=e),r>=e&&(a+=Math.floor(r/e),r%=e),s(a,0)+s(r,a)+s(i,1)}function N(e,t){if(0<=e){for(;127<e;)t.push(127&e|128),e>>>=7;t.push(e)}else{for(let n=0;n<9;n++)t.push(127&e|128),e>>=7;t.push(1)}}function B(){let e=this.buf[this.pos++];var t=127&e;if(0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<7,0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<14,0==(128&e))return this.assertBounds(),t;if(t|=(127&(e=this.buf[this.pos++]))<<21,0==(128&e))return this.assertBounds(),t;t|=(15&(e=this.buf[this.pos++]))<<28;for(let t=5;0!=(128&e)&&t<10;t++)e=this.buf[this.pos++];if(0!=(128&e))throw new Error("invalid varint");return this.assertBounds(),t>>>0}function E(){var e=new DataView(new ArrayBuffer(8));return void 0!==globalThis.BigInt&&"function"==typeof e.getBigInt64&&"function"==typeof e.getBigUint64&&"function"==typeof e.setBigInt64&&"function"==typeof e.setBigUint64?{MIN:BigInt("-9223372036854775808"),MAX:BigInt("9223372036854775807"),UMIN:BigInt("0"),UMAX:BigInt("18446744073709551615"),C:BigInt,V:e}:void 0}const ee=E();function U(e){if(!e)throw new Error("BigInt unavailable, see https://github.com/timostamm/protobuf-ts/blob/v1.0.8/MANUAL.md#bigint-support")}const te=/^-?[0-9]+$/,ne=4294967296;class ie{constructor(e,t){this.lo=0|e,this.hi=0|t}isZero(){return 0==this.lo&&0==this.hi}toNumber(){var e=this.hi*ne+(this.lo>>>0);if(Number.isSafeInteger(e))return e;throw new Error("cannot convert to safe number")}}const re=class extends ie{static from(e){if(ee)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=ee.C(e);case"number":if(0===e)return this.ZERO;e=ee.C(e);case"bigint":if(!e)return this.ZERO;if(e<ee.UMIN)throw new Error("signed value for ulong");if(e>ee.UMAX)throw new Error("ulong too large");return ee.V.setBigUint64(0,e,!0),new re(ee.V.getInt32(0,!0),ee.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;if(e=e.trim(),!te.test(e))throw new Error("string is no integer");var[t,n,i]=v(e);if(t)throw new Error("signed value");return new re(n,i);case"number":if(0==e)return this.ZERO;if(!Number.isSafeInteger(e))throw new Error("number is no integer");if(e<0)throw new Error("signed value for ulong");return new re(e,e/ne)}throw new Error("unknown value "+typeof e)}toString(){return ee?this.toBigInt().toString():T(this.lo,this.hi)}toBigInt(){return U(ee),ee.V.setInt32(0,this.lo,!0),ee.V.setInt32(4,this.hi,!0),ee.V.getBigUint64(0,!0)}};let ae=re;ae.ZERO=new re(0,0);const se=class extends ie{static from(e){if(ee)switch(typeof e){case"string":if("0"==e)return this.ZERO;if(""==e)throw new Error("string is no integer");e=ee.C(e);case"number":if(0===e)return this.ZERO;e=ee.C(e);case"bigint":if(!e)return this.ZERO;if(e<ee.MIN)throw new Error("ulong too small");if(e>ee.MAX)throw new Error("ulong too large");return ee.V.setBigInt64(0,e,!0),new se(ee.V.getInt32(0,!0),ee.V.getInt32(4,!0))}else switch(typeof e){case"string":if("0"==e)return this.ZERO;var t,n,i;if(e=e.trim(),te.test(e))return[t,i,n]=v(e),i=new se(i,n),t?i.negate():i;throw new Error("string is no integer");case"number":if(0==e)return this.ZERO;if(Number.isSafeInteger(e))return 0<e?new se(e,e/ne):new se(-e,-e/ne).negate();throw new Error("number is no integer")}throw new Error("unknown value "+typeof e)}isNegative(){return 0!=(2147483648&this.hi)}negate(){let e=~this.hi,t=this.lo;return t?t=1+~t:e+=1,new se(t,e)}toString(){var e;return ee?this.toBigInt().toString():this.isNegative()?"-"+T((e=this.negate()).lo,e.hi):T(this.lo,this.hi)}toBigInt(){return U(ee),ee.V.setInt32(0,this.lo,!0),ee.V.setInt32(4,this.hi,!0),ee.V.getBigInt64(0,!0)}};let oe=se;oe.ZERO=new se(0,0);class le{constructor(e,t){this.varint64=_,this.uint32=B,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=null!=t?t:new TextDecoder("utf-8",{fatal:!0})}tag(){var e=this.uint32(),t=e>>>3,e=7&e;if(t<=0||e<0||5<e)throw new Error("illegal tag: field no "+t+" wire type "+e);return[t,e]}skip(e){var t,n=this.pos;switch(e){case o.Varint:for(;128&this.buf[this.pos++];);break;case o.Bit64:this.pos+=4;case o.Bit32:this.pos+=4;break;case o.LengthDelimited:var i=this.uint32();this.pos+=i;break;case o.StartGroup:for(;(t=this.tag()[1])!==o.EndGroup;)this.skip(t);break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(n,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return 0|this.uint32()}sint32(){var e=this.uint32();return e>>>1^-(1&e)}int64(){return new oe(...this.varint64())}uint64(){return new ae(...this.varint64())}sint64(){var[e,t]=this.varint64(),n=-(1&e),e=(e>>>1|(1&t)<<31)^n,t=t>>>1^n;return new oe(e,t)}bool(){var[e,t]=this.varint64();return 0!==e||0!==t}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return new ae(this.sfixed32(),this.sfixed32())}sfixed64(){return new oe(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){var e=this.uint32(),t=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(t,t+e)}string(){return this.textDecoder.decode(this.bytes())}}function x(e,t){if(!e)throw new Error(t)}const he=34028234663852886e22,fe=-34028234663852886e22,ue=4294967295,ce=2147483647,de=-2147483648;function I(e){if("number"!=typeof e)throw new Error("invalid int 32: "+typeof e);if(!Number.isInteger(e)||e>ce||e<de)throw new Error("invalid int 32: "+e)}function R(e){if("number"!=typeof e)throw new Error("invalid uint 32: "+typeof e);if(!Number.isInteger(e)||e>ue||e<0)throw new Error("invalid uint 32: "+e)}function O(e){if("number"!=typeof e)throw new Error("invalid float 32: "+typeof e);if(Number.isFinite(e)&&(e>he||e<fe))throw new Error("invalid float 32: "+e)}class pe{constructor(e){this.stack=[],this.textEncoder=null!=e?e:new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let t=0;t<this.chunks.length;t++)e+=this.chunks[t].length;var t=new Uint8Array(e);let n=0;for(let e=0;e<this.chunks.length;e++)t.set(this.chunks[e],n),n+=this.chunks[e].length;return this.chunks=[],t}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){var e=this.finish(),t=this.stack.pop();if(t)return this.chunks=t.chunks,this.buf=t.buf,this.uint32(e.byteLength),this.raw(e);throw new Error("invalid state, fork stack empty")}tag(e,t){return this.uint32((e<<3|t)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(R(e);127<e;)this.buf.push(127&e|128),e>>>=7;return this.buf.push(e),this}int32(e){return I(e),N(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){e=this.textEncoder.encode(e);return this.uint32(e.byteLength),this.raw(e)}float(e){O(e);var t=new Uint8Array(4);return new DataView(t.buffer).setFloat32(0,e,!0),this.raw(t)}double(e){var t=new Uint8Array(8);return new DataView(t.buffer).setFloat64(0,e,!0),this.raw(t)}fixed32(e){R(e);var t=new Uint8Array(4);return new DataView(t.buffer).setUint32(0,e,!0),this.raw(t)}sfixed32(e){I(e);var t=new Uint8Array(4);return new DataView(t.buffer).setInt32(0,e,!0),this.raw(t)}sint32(e){return I(e),N(e=(e<<1^e>>31)>>>0,this.buf),this}sfixed64(e){var t=new Uint8Array(8),n=new DataView(t.buffer),e=oe.from(e);return n.setInt32(0,e.lo,!0),n.setInt32(4,e.hi,!0),this.raw(t)}fixed64(e){var t=new Uint8Array(8),n=new DataView(t.buffer),e=ae.from(e);return n.setInt32(0,e.lo,!0),n.setInt32(4,e.hi,!0),this.raw(t)}int64(e){e=oe.from(e);return k(e.lo,e.hi,this.buf),this}sint64(e){var e=oe.from(e),t=e.hi>>31;return k(e.lo<<1^t,(e.hi<<1|e.lo>>>31)^t,this.buf),this}uint64(e){e=ae.from(e);return k(e.lo,e.hi,this.buf),this}}function A(e){return e?b(b({},we),e):we}function D(e){return e?b(b({},me),e):me}!function(e){e.symbol=Symbol.for("protobuf-ts/unknown"),e.onRead=(n,i,r,a,s)=>{(t(i)?i[e.symbol]:i[e.symbol]=[]).push({no:r,wireType:a,data:s})},e.onWrite=(t,n,i)=>{for(var{no:r,wireType:a,data:s}of e.list(n))i.tag(r,a).raw(s)},e.list=(n,i)=>t(n)?(n=n[e.symbol],i?n.filter((e=>e.no==i)):n):[],e.last=(t,n)=>e.list(t,n).slice(-1)[0];const t=t=>t&&Array.isArray(t[e.symbol])}(s=s||{});const me={readUnknownField:!0,readerFactory:e=>new le(e)},we={writeUnknownFields:!0,writerFactory:()=>new pe},ge=(!function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(o=o||{}),Symbol.for("protobuf-ts/message-type"));function S(e){let t=!1;var n=[];for(let r=0;r<e.length;r++){var i=e.charAt(r);"_"==i?t=!0:/\d/.test(i)?(n.push(i),t=!0):t?(n.push(i.toUpperCase()),t=!1):0==r?n.push(i.toLowerCase()):n.push(i)}return n.join("")}function L(e){var t;return e.localName=null!=(t=e.localName)?t:S(e.name),e.jsonName=null!=(t=e.jsonName)?t:S(e.name),e.repeat=null!=(t=e.repeat)?t:0,e.opt=null!=(t=e.opt)?t:!e.repeat&&(!e.oneof&&"message"==e.kind),e}function F(e){if("object"!=typeof e||null===e||!e.hasOwnProperty("oneofKind"))return!1;switch(typeof e.oneofKind){case"string":return void 0===e[e.oneofKind]?!1:2==Object.keys(e).length;case"undefined":return 1==Object.keys(e).length;default:return!1}}!function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"}(l=l||{}),function(e){e[e.BIGINT=0]="BIGINT",e[e.STRING=1]="STRING",e[e.NUMBER=2]="NUMBER"}(h=h||{}),function(e){e[e.NO=0]="NO",e[e.PACKED=1]="PACKED",e[e.UNPACKED=2]="UNPACKED"}(f=f||{});class be{constructor(e){this.fields=null!=(e=e.fields)?e:[]}prepare(){if(!this.data){var e,t=[],n=[],i=[];for(e of this.fields)if(e.oneof)i.includes(e.oneof)||(i.push(e.oneof),t.push(e.oneof),n.push(e.oneof));else switch(n.push(e.localName),e.kind){case"scalar":case"enum":e.opt&&!e.repeat||t.push(e.localName);break;case"message":e.repeat&&t.push(e.localName);break;case"map":t.push(e.localName)}this.data={req:t,known:n,oneofs:Object.values(i)}}}is(e,t,n=!1){if(!(t<0)){if(null==e||"object"!=typeof e)return!1;this.prepare();let r=Object.keys(e),a=this.data;if(r.length<a.req.length||a.req.some((e=>!r.includes(e))))return!1;if(!n&&r.some((e=>!a.known.includes(e))))return!1;if(!(t<1)){for(const r of a.oneofs){const a=e[r];if(!F(a))return!1;if(void 0!==a.oneofKind){var i=this.fields.find((e=>e.localName===a.oneofKind));if(!i)return!1;if(!this.field(a[a.oneofKind],i,n,t))return!1}}for(const i of this.fields)if(void 0===i.oneof&&!this.field(e[i.localName],i,n,t))return!1}}return!0}field(e,t,n,i){var r=t.repeat;switch(t.kind){case"scalar":return void 0===e?t.opt:r?this.scalars(e,t.T,i,t.L):this.scalar(e,t.T,t.L);case"enum":return void 0===e?t.opt:r?this.scalars(e,l.INT32,i):this.scalar(e,l.INT32);case"message":return void 0===e?!0:r?this.messages(e,t.T(),n,i):this.message(e,t.T(),n,i);case"map":if("object"!=typeof e||null===e)return!1;if(i<2)return!0;if(!this.mapKeys(e,t.K,i))return!1;switch(t.V.kind){case"scalar":return this.scalars(Object.values(e),t.V.T,i,t.V.L);case"enum":return this.scalars(Object.values(e),l.INT32,i);case"message":return this.messages(Object.values(e),t.V.T(),n,i)}}return!0}message(e,t,n,i){return n?t.isAssignable(e,i):t.is(e,i)}messages(e,t,n,i){if(!Array.isArray(e))return!1;if(!(i<2))if(n){for(let n=0;n<e.length&&n<i;n++)if(!t.isAssignable(e[n],i-1))return!1}else for(let n=0;n<e.length&&n<i;n++)if(!t.is(e[n],i-1))return!1;return!0}scalar(e,t,n){var i=typeof e;switch(t){case l.UINT64:case l.FIXED64:case l.INT64:case l.SFIXED64:case l.SINT64:switch(n){case h.BIGINT:return"bigint"==i;case h.NUMBER:return"number"==i&&!isNaN(e);default:return"string"==i}case l.BOOL:return"boolean"==i;case l.STRING:return"string"==i;case l.BYTES:return e instanceof Uint8Array;case l.DOUBLE:case l.FLOAT:return"number"==i&&!isNaN(e);default:return"number"==i&&Number.isInteger(e)}}scalars(e,t,n,i){if(!Array.isArray(e))return!1;if(!(n<2)&&Array.isArray(e))for(let r=0;r<e.length&&r<n;r++)if(!this.scalar(e[r],t,i))return!1;return!0}mapKeys(e,t,n){var i=Object.keys(e);switch(t){case l.INT32:case l.FIXED32:case l.SFIXED32:case l.SINT32:case l.UINT32:return this.scalars(i.slice(0,n).map((e=>parseInt(e))),t,n);case l.BOOL:return this.scalars(i.slice(0,n).map((e=>"true"==e||"false"!=e&&e)),t,n);default:return this.scalars(i,t,n,h.STRING)}}}function j(e){var t=typeof e;if("object"==t){if(Array.isArray(e))return"array";if(null===e)return"null"}return t}function z(e){return null!==e&&"object"==typeof e&&!Array.isArray(e)}let ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),_e=[];for(let Ie=0;Ie<ye.length;Ie++)_e[ye[Ie].charCodeAt(0)]=Ie;function C(e){let t=3*e.length/4,n=("="==e[e.length-2]?t-=2:"="==e[e.length-1]&&--t,new Uint8Array(t)),i=0,r=0,a,s=0;for(let t=0;t<e.length;t++){if(void 0===(a=_e[e.charCodeAt(t)]))switch(e[t]){case"=":r=0;case"\n":case"\r":case"\t":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:s=a,r=1;break;case 1:n[i++]=s<<2|(48&a)>>4,s=a,r=2;break;case 2:n[i++]=(15&s)<<4|(60&a)>>2,s=a,r=3;break;case 3:n[i++]=(3&s)<<6|a,r=0}}if(1==r)throw Error("invalid base64 string.");return n.subarray(0,i)}function $(e){let t="",n=0,i,r=0;for(let a=0;a<e.length;a++)switch(i=e[a],n){case 0:t+=ye[i>>2],r=(3&i)<<4,n=1;break;case 1:t+=ye[r|i>>4],r=(15&i)<<2,n=2;break;case 2:t=(t+=ye[r|i>>6])+ye[63&i],n=0}return n&&(t=t+ye[r]+"=",1==n&&(t+="=")),t}function W(e,t){switch(t){case h.BIGINT:return e.toBigInt();case h.NUMBER:return e.toNumber();default:return e.toString()}}_e["-".charCodeAt(0)]=ye.indexOf("+"),_e["_".charCodeAt(0)]=ye.indexOf("/");class ke{constructor(e){this.info=e}prepare(){var e;if(void 0===this.fMap){this.fMap={};for(const t of null!=(e=this.info.fields)?e:[])this.fMap[t.name]=t,this.fMap[t.jsonName]=t,this.fMap[t.localName]=t}}assert(e,t,n){if(!e){let e=j(n);throw"number"!=e&&"boolean"!=e||(e=n.toString()),new Error(`Cannot parse JSON ${e} for ${this.info.typeName}#`+t)}}read(e,t,n){this.prepare();var i,r,a=[];for([i,r]of Object.entries(e)){var s=this.fMap[i];if(!s){if(n.ignoreUnknownFields)continue;throw new Error(`Found unknown field while reading ${this.info.typeName} from JSON format. JSON key: `+i)}var o=s.localName;let e;if(s.oneof){if(a.includes(s.oneof))throw new Error(`Multiple members of the oneof group "${s.oneof}" of ${this.info.typeName} are present in JSON.`);a.push(s.oneof),e=t[s.oneof]={oneofKind:o}}else e=t;if("map"==s.kind){if(null!==r){this.assert(z(r),s.name,r);var f,u,c=e[o];for([f,u]of Object.entries(r)){this.assert(null!==u,s.name+" map value",null);let e;switch(s.V.kind){case"message":e=s.V.T().internalJsonRead(u,n);break;case"enum":if(!1===(e=this.enum(s.V.T(),u,s.name,n.ignoreUnknownFields)))continue;break;case"scalar":e=this.scalar(u,s.V.T,s.V.L,s.name)}this.assert(void 0!==e,s.name+" map value",u);let t=f;s.K==l.BOOL&&(t="true"==t||"false"!=t&&t),c[t=this.scalar(t,s.K,h.STRING,s.name).toString()]=e}}}else if(s.repeat){if(null!==r){this.assert(Array.isArray(r),s.name,r);var d=e[o];for(const e of r){this.assert(null!==e,s.name,null);let t;switch(s.kind){case"message":t=s.T().internalJsonRead(e,n);break;case"enum":if(!1===(t=this.enum(s.T(),e,s.name,n.ignoreUnknownFields)))continue;break;case"scalar":t=this.scalar(e,s.T,s.L,s.name)}this.assert(void 0!==t,s.name,r),d.push(t)}}}else switch(s.kind){case"message":null===r&&"google.protobuf.Value"!=s.T().typeName?this.assert(void 0===s.oneof,s.name+" (oneof member)",null):e[o]=s.T().internalJsonRead(r,n,e[o]);break;case"enum":var p=this.enum(s.T(),r,s.name,n.ignoreUnknownFields);!1!==p&&(e[o]=p);break;case"scalar":e[o]=this.scalar(r,s.T,s.L,s.name)}}}enum(e,t,n,i){if("google.protobuf.NullValue"==e[0]&&x(null===t,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} only accepts null.`),null===t)return 0;switch(typeof t){case"number":return x(Number.isInteger(t),`Unable to parse field ${this.info.typeName}#${n}, enum can only be integral number, got ${t}.`),t;case"string":let a=t;e[2]&&t.substring(0,e[2].length)===e[2]&&(a=t.substring(e[2].length));var r=e[1][a];return void 0===r&&i?!1:(x("number"==typeof r,`Unable to parse field ${this.info.typeName}#${n}, enum ${e[0]} has no value for "${t}".`),r)}x(!1,`Unable to parse field ${this.info.typeName}#${n}, cannot parse enum value from ${typeof t}".`)}scalar(e,t,n,i){let r;try{switch(t){case l.DOUBLE:case l.FLOAT:if(null===e)return 0;if("NaN"===e)return Number.NaN;if("Infinity"===e)return Number.POSITIVE_INFINITY;if("-Infinity"===e)return Number.NEGATIVE_INFINITY;if(""===e)r="empty string";else if("string"==typeof e&&e.trim().length!==e.length)r="extra whitespace";else if("string"==typeof e||"number"==typeof e){var a=Number(e);if(Number.isNaN(a))r="not a number";else{if(Number.isFinite(a))return t==l.FLOAT&&O(a),a;r="too large or small"}}break;case l.INT32:case l.FIXED32:case l.SFIXED32:case l.SINT32:case l.UINT32:if(null===e)return 0;let s;if("number"==typeof e?s=e:""===e?r="empty string":"string"==typeof e&&(e.trim().length!==e.length?r="extra whitespace":s=Number(e)),void 0===s)break;return(t==l.UINT32?R:I)(s),s;case l.INT64:case l.SFIXED64:case l.SINT64:if(null===e)return W(oe.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return W(oe.from(e),n);case l.FIXED64:case l.UINT64:if(null===e)return W(ae.ZERO,n);if("number"!=typeof e&&"string"!=typeof e)break;return W(ae.from(e),n);case l.BOOL:if(null===e)return!1;if("boolean"!=typeof e)break;return e;case l.STRING:if(null===e)return"";if("string"!=typeof e){r="extra whitespace";break}try{encodeURIComponent(e)}catch(i){0;break}return e;case l.BYTES:if(null===e||""===e)return new Uint8Array(0);if("string"!=typeof e)break;return C(e)}}catch(i){r=i.message}this.assert(!1,i+(r?" - "+r:""),e)}}class ve{constructor(e){this.fields=null!=(e=e.fields)?e:[]}write(e,t){var n,i,r={},a=e;for(const e of this.fields)e.oneof?(n=a[e.oneof]).oneofKind===e.localName&&(i="scalar"==e.kind||"enum"==e.kind?y(b({},t),{emitDefaultValues:!0}):t,x(void 0!==(n=this.field(e,n[e.localName],i))),r[t.useProtoFieldName?e.name:e.jsonName]=n):void 0!==(i=this.field(e,a[e.localName],t))&&(r[t.useProtoFieldName?e.name:e.jsonName]=i);return r}field(e,t,n){let i=void 0;if("map"==e.kind){x("object"==typeof t&&null!==t);var r={};switch(e.V.kind){case"scalar":for(var[a,s]of Object.entries(t)){s=this.scalar(e.V.T,s,e.name,!1,!0);x(void 0!==s),r[a.toString()]=s}break;case"message":var o,l,h=e.V.T();for([o,l]of Object.entries(t)){var f=this.message(h,l,e.name,n);x(void 0!==f),r[o.toString()]=f}break;case"enum":var u,c,d=e.V.T();for([u,c]of Object.entries(t)){x(void 0===c||"number"==typeof c);var p=this.enum(d,c,e.name,!1,!0,n.enumAsInteger);x(void 0!==p),r[u.toString()]=p}}(n.emitDefaultValues||0<Object.keys(r).length)&&(i=r)}else if(e.repeat){x(Array.isArray(t));var m=[];switch(e.kind){case"scalar":for(let n=0;n<t.length;n++){var w=this.scalar(e.T,t[n],e.name,e.opt,!0);x(void 0!==w),m.push(w)}break;case"enum":var g=e.T();for(let i=0;i<t.length;i++){x(void 0===t[i]||"number"==typeof t[i]);var b=this.enum(g,t[i],e.name,e.opt,!0,n.enumAsInteger);x(void 0!==b),m.push(b)}break;case"message":var y=e.T();for(let i=0;i<t.length;i++){var _=this.message(y,t[i],e.name,n);x(void 0!==_),m.push(_)}}(n.emitDefaultValues||0<m.length||n.emitDefaultValues)&&(i=m)}else switch(e.kind){case"scalar":i=this.scalar(e.T,t,e.name,e.opt,n.emitDefaultValues);break;case"enum":i=this.enum(e.T(),t,e.name,e.opt,n.emitDefaultValues,n.enumAsInteger);break;case"message":i=this.message(e.T(),t,e.name,n)}return i}enum(e,t,n,i,r,a){if("google.protobuf.NullValue"==e[0])return null;if(void 0===t)x(i);else if(0!==t||r||i)return x("number"==typeof t),x(Number.isInteger(t)),a||!e[1].hasOwnProperty(t)?t:e[2]?e[2]+e[1][t]:e[1][t]}message(e,t,n,i){return void 0===t?i.emitDefaultValues?null:void 0:e.internalJsonWrite(t,i)}scalar(e,t,n,i,r){if(void 0===t)x(i);else{var a=r||i;switch(e){case l.INT32:case l.SFIXED32:case l.SINT32:return 0===t?a?0:void 0:(I(t),t);case l.FIXED32:case l.UINT32:return 0===t?a?0:void 0:(R(t),t);case l.FLOAT:O(t);case l.DOUBLE:return 0===t?a?0:void 0:(x("number"==typeof t),Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t);case l.STRING:return""===t?a?"":void 0:(x("string"==typeof t),t);case l.BOOL:return!1===t?!a&&void 0:(x("boolean"==typeof t),t);case l.UINT64:case l.FIXED64:x("number"==typeof t||"string"==typeof t||"bigint"==typeof t);var s=ae.from(t);return s.isZero()&&!a?void 0:s.toString();case l.INT64:case l.SFIXED64:case l.SINT64:x("number"==typeof t||"string"==typeof t||"bigint"==typeof t);s=oe.from(t);return s.isZero()&&!a?void 0:s.toString();case l.BYTES:return(x(t instanceof Uint8Array),t.byteLength)?$(t):a?"":void 0}}}}function V(e,t=h.STRING){switch(e){case l.BOOL:return!1;case l.UINT64:case l.FIXED64:return W(ae.ZERO,t);case l.INT64:case l.SFIXED64:case l.SINT64:return W(oe.ZERO,t);case l.DOUBLE:case l.FLOAT:return 0;case l.BYTES:return new Uint8Array(0);case l.STRING:return"";default:return 0}}class Te{constructor(e){this.info=e}prepare(){var e;this.fieldNoToField||(e=null!=(e=this.info.fields)?e:[],this.fieldNoToField=new Map(e.map((e=>[e.no,e]))))}read(e,t,n,i){this.prepare();for(var r=void 0===i?e.len:e.pos+i;e.pos<r;){var[a,h]=e.tag(),f=this.fieldNoToField.get(a);if(f){let i=t,r=f.repeat,a=f.localName;switch(f.oneof&&(i=i[f.oneof]).oneofKind!==a&&(i=t[f.oneof]={oneofKind:a}),f.kind){case"scalar":case"enum":var u="enum"==f.kind?l.INT32:f.T,c="scalar"==f.kind?f.L:void 0;if(r){var d=i[a];if(h==o.LengthDelimited&&u!=l.STRING&&u!=l.BYTES)for(var p=e.uint32()+e.pos;e.pos<p;)d.push(this.scalar(e,u,c));else d.push(this.scalar(e,u,c))}else i[a]=this.scalar(e,u,c);break;case"message":r?(m=i[a],w=f.T().internalBinaryRead(e,e.uint32(),n),m.push(w)):i[a]=f.T().internalBinaryRead(e,e.uint32(),n,i[a]);break;case"map":var[m,w]=this.mapEntry(f,e,n);i[a][m]=w}}else{var g=n.readUnknownField;if("throw"==g)throw new Error(`Unknown field ${a} (wire type ${h}) for `+this.info.typeName);var b=e.skip(h);!1!==g&&(!0===g?s.onRead:g)(this.info.typeName,t,a,h,b)}}}mapEntry(e,t,n){var i=t.uint32(),r=t.pos+i;let a=void 0,s=void 0;for(;t.pos<r;){var[o,f]=t.tag();switch(o){case 1:a=e.K==l.BOOL?t.bool().toString():this.scalar(t,e.K,h.STRING);break;case 2:switch(e.V.kind){case"scalar":s=this.scalar(t,e.V.T,e.V.L);break;case"enum":s=t.int32();break;case"message":s=e.V.T().internalBinaryRead(t,t.uint32(),n)}break;default:throw new Error(`Unknown field ${o} (wire type ${f}) in map entry for ${this.info.typeName}#`+e.name)}}if(void 0===a&&(i=V(e.K),a=e.K==l.BOOL?i.toString():i),void 0===s)switch(e.V.kind){case"scalar":s=V(e.V.T,e.V.L);break;case"enum":s=0;break;case"message":s=e.V.T().create()}return[a,s]}scalar(e,t,n){switch(t){case l.INT32:return e.int32();case l.STRING:return e.string();case l.BOOL:return e.bool();case l.DOUBLE:return e.double();case l.FLOAT:return e.float();case l.INT64:return W(e.int64(),n);case l.UINT64:return W(e.uint64(),n);case l.FIXED64:return W(e.fixed64(),n);case l.FIXED32:return e.fixed32();case l.BYTES:return e.bytes();case l.UINT32:return e.uint32();case l.SFIXED32:return e.sfixed32();case l.SFIXED64:return W(e.sfixed64(),n);case l.SINT32:return e.sint32();case l.SINT64:return W(e.sint64(),n)}}}class Ne{constructor(e){this.info=e}prepare(){var e;this.fields||(e=this.info.fields?this.info.fields.concat():[],this.fields=e.sort(((e,t)=>e.no-t.no)))}write(e,t,n){this.prepare();for(const s of this.fields){let h,u,c=s.repeat,d=s.localName;if(s.oneof){var i=e[s.oneof];if(i.oneofKind!==d)continue;h=i[d],u=!0}else h=e[d],u=!1;switch(s.kind){case"scalar":case"enum":var r="enum"==s.kind?l.INT32:s.T;if(c)if(x(Array.isArray(h)),c==f.PACKED)this.packed(t,r,s.no,h);else for(const e of h)this.scalar(t,r,s.no,e,!0);else void 0===h?x(s.opt):this.scalar(t,r,s.no,h,u||s.opt);break;case"message":if(c){x(Array.isArray(h));for(const e of h)this.message(t,n,s.T(),s.no,e)}else this.message(t,n,s.T(),s.no,h);break;case"map":x("object"==typeof h&&null!==h);for(var[a,o]of Object.entries(h))this.mapEntry(t,n,s,a,o)}}var h=n.writeUnknownFields;!1!==h&&(!0===h?s.onWrite:h)(this.info.typeName,e,t)}mapEntry(e,t,n,i,r){e.tag(n.no,o.LengthDelimited),e.fork();let a=i;switch(n.K){case l.INT32:case l.FIXED32:case l.UINT32:case l.SFIXED32:case l.SINT32:a=Number.parseInt(i);break;case l.BOOL:x("true"==i||"false"==i),a="true"==i}switch(this.scalar(e,n.K,1,a,!0),n.V.kind){case"scalar":this.scalar(e,n.V.T,2,r,!0);break;case"enum":this.scalar(e,l.INT32,2,r,!0);break;case"message":this.message(e,t,n.V.T(),2,r)}e.join()}message(e,t,n,i,r){void 0!==r&&(n.internalBinaryWrite(r,e.tag(i,o.LengthDelimited).fork(),t),e.join())}scalar(e,t,n,i,r){var[t,a,s]=this.scalarInfo(t,i);s&&!r||(e.tag(n,t),e[a](i))}packed(e,t,n,i){if(i.length){x(t!==l.BYTES&&t!==l.STRING),e.tag(n,o.LengthDelimited),e.fork();var[,r]=this.scalarInfo(t);for(let t=0;t<i.length;t++)e[r](i[t]);e.join()}}scalarInfo(e,t){let n=o.Varint,i;var r=void 0===t;let a=0===t;switch(e){case l.INT32:i="int32";break;case l.STRING:a=r||!t.length,n=o.LengthDelimited,i="string";break;case l.BOOL:a=!1===t,i="bool";break;case l.UINT32:i="uint32";break;case l.DOUBLE:n=o.Bit64,i="double";break;case l.FLOAT:n=o.Bit32,i="float";break;case l.INT64:a=r||oe.from(t).isZero(),i="int64";break;case l.UINT64:a=r||ae.from(t).isZero(),i="uint64";break;case l.FIXED64:a=r||ae.from(t).isZero(),n=o.Bit64,i="fixed64";break;case l.BYTES:a=r||!t.byteLength,n=o.LengthDelimited,i="bytes";break;case l.FIXED32:n=o.Bit32,i="fixed32";break;case l.SFIXED32:n=o.Bit32,i="sfixed32";break;case l.SFIXED64:a=r||oe.from(t).isZero(),n=o.Bit64,i="sfixed64";break;case l.SINT32:i="sint32";break;case l.SINT64:a=r||oe.from(t).isZero(),i="sint64"}return[n,i,r||a]}}function Z(e){var t,n={};Object.defineProperty(n,ge,{enumerable:!1,value:e});for(t of e.fields){var i=t.localName;if(!t.opt)if(t.oneof)n[t.oneof]={oneofKind:void 0};else if(t.repeat)n[i]=[];else switch(t.kind){case"scalar":n[i]=V(t.T,t.L);break;case"enum":n[i]=0;break;case"map":n[i]={}}}return n}function P(e,t,n){let i,r=n,a;for(var s of e.fields){var o=s.localName;if(s.oneof){var l=r[s.oneof];if(void 0===l)continue;if(i=l[o],(a=t[s.oneof]).oneofKind=l.oneofKind,void 0===i){delete a[o];continue}}else if(i=r[o],a=t,void 0===i)continue;switch(s.kind){case"scalar":case"enum":s.repeat?a[o]=i.concat():a[o]=i;break;case"message":var h=s.T();if(s.repeat)for(let e=0;e<i.length;e++)a[o][e]=h.create(i[e]);else void 0===a[o]?a[o]=h.create(i):h.mergePartial(a[o],i);break;case"map":switch(s.V.kind){case"scalar":case"enum":Object.assign(a[o],i);break;case"message":var f,u=s.V.T();for(f of Object.keys(i))a[o][f]=u.create(i[f])}}}}const Be={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0},Ee={ignoreUnknownFields:!1};function M(e){return e?b(b({},Ee),e):Ee}function K(e){return e?b(b({},Be),e):Be}function J(e,t,n){if(t!==n){if(!t||!n)return!1;for(var i of e.fields){var r=i.localName,a=(i.oneof?t[i.oneof]:t)[r],s=(i.oneof?n[i.oneof]:n)[r];switch(i.kind){case"enum":case"scalar":var o="enum"==i.kind?l.INT32:i.T;if((i.repeat?G:X)(o,a,s))break;return!1;case"map":if("message"==i.V.kind?H(i.V.T(),Ue(a),Ue(s)):G("enum"==i.V.kind?l.INT32:i.V.T,Ue(a),Ue(s)))break;return!1;case"message":o=i.T();if(i.repeat?H(o,a,s):o.equals(a,s))break;return!1}}}return!0}const Ue=Object.values;function X(e,t,n){if(t!==n){if(e!==l.BYTES)return!1;var i=t,r=n;if(i.length!==r.length)return!1;for(let e=0;e<i.length;e++)if(i[e]!=r[e])return!1}return!0}function G(e,t,n){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!X(e,t[i],n[i]))return!1;return!0}function H(e,t,n){if(t.length!==n.length)return!1;for(let i=0;i<t.length;i++)if(!e.equals(t[i],n[i]))return!1;return!0}class xe{constructor(e,t,n){this.defaultCheckDepth=16,this.typeName=e,this.fields=t.map(L),this.options=null!=n?n:{},this.refTypeCheck=new be(this),this.refJsonReader=new ke(this),this.refJsonWriter=new ve(this),this.refBinReader=new Te(this),this.refBinWriter=new Ne(this)}create(e){var t=Z(this);return void 0!==e&&P(this,t,e),t}clone(e){var t=this.create();return P(this,t,e),t}equals(e,t){return J(this,e,t)}is(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!1)}isAssignable(e,t=this.defaultCheckDepth){return this.refTypeCheck.is(e,t,!0)}mergePartial(e,t){P(this,e,t)}fromBinary(e,t){t=D(t);return this.internalBinaryRead(t.readerFactory(e),e.byteLength,t)}fromJson(e,t){return this.internalJsonRead(e,M(t))}fromJsonString(e,t){e=JSON.parse(e);return this.fromJson(e,t)}toJson(e,t){return this.internalJsonWrite(e,K(t))}toJsonString(e,t){var e=this.toJson(e,t);return JSON.stringify(e,null,null!=(e=null==t?void 0:t.prettySpaces)?e:0)}toBinary(e,t){t=A(t);return this.internalBinaryWrite(e,t.writerFactory(),t).finish()}internalJsonRead(e,t,n){if(null===e||"object"!=typeof e||Array.isArray(e))throw new Error(`Unable to parse message ${this.typeName} from JSON ${j(e)}.`);return n=null!=n?n:this.create(),this.refJsonReader.read(e,n,t),n}internalJsonWrite(e,t){return this.refJsonWriter.write(e,t)}internalBinaryWrite(e,t,n){return this.refBinWriter.write(e,t,n),t}internalBinaryRead(e,t,n,i){i=null!=i?i:this.create();return this.refBinReader.read(e,i,n,t),i}};switch(r){case"application/x-protobuf":break;case"application/grpc":case"application/grpc+proto":!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).pako={})}(this,(function(e){"use strict";function t(e){let t=e.length;for(;--t>=0;)e[t]=0}const n=256,i=286,r=30,a=15,s=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),o=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),l=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),h=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),f=new Array(576);t(f);const u=new Array(60);t(u);const c=new Array(512);t(c);const d=new Array(256);t(d);const p=new Array(29);t(p);const m=new Array(r);function w(e,t,n,i,r){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=e&&e.length}let g,b,y;function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}t(m);const k=e=>e<256?c[e]:c[256+(e>>>7)],v=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},T=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,v(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},N=(e,t,n)=>{T(e,n[2*t],n[2*t+1])},B=(e,t)=>{let n=0;do{n|=1&e,e>>>=1,n<<=1}while(--t>0);return n>>>1},E=(e,t,n)=>{const i=new Array(16);let r,s,o=0;for(r=1;r<=a;r++)i[r]=o=o+n[r-1]<<1;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=B(i[t]++,t))}},U=e=>{let t;for(t=0;t<i;t++)e.dyn_ltree[2*t]=0;for(t=0;t<r;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0},x=e=>{e.bi_valid>8?v(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},I=(e,t,n,i)=>{const r=2*t,a=2*n;return e[r]<e[a]||e[r]===e[a]&&i[t]<=i[n]},R=(e,t,n)=>{const i=e.heap[n];let r=n<<1;for(;r<=e.heap_len&&(r<e.heap_len&&I(t,e.heap[r+1],e.heap[r],e.depth)&&r++,!I(t,i,e.heap[r],e.depth));)e.heap[n]=e.heap[r],n=r,r<<=1;e.heap[n]=i},O=(e,t,i)=>{let r,a,l,h,f=0;if(0!==e.last_lit)do{r=e.pending_buf[e.d_buf+2*f]<<8|e.pending_buf[e.d_buf+2*f+1],a=e.pending_buf[e.l_buf+f],f++,0===r?N(e,a,t):(l=d[a],N(e,l+n+1,t),h=s[l],0!==h&&(a-=p[l],T(e,a,h)),r--,l=k(r),N(e,l,i),h=o[l],0!==h&&(r-=m[l],T(e,r,h)))}while(f<e.last_lit);N(e,256,t)},A=(e,t)=>{const n=t.dyn_tree,i=t.stat_desc.static_tree,r=t.stat_desc.has_stree,s=t.stat_desc.elems;let o,l,h,f=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<s;o++)0!==n[2*o]?(e.heap[++e.heap_len]=f=o,e.depth[o]=0):n[2*o+1]=0;for(;e.heap_len<2;)h=e.heap[++e.heap_len]=f<2?++f:0,n[2*h]=1,e.depth[h]=0,e.opt_len--,r&&(e.static_len-=i[2*h+1]);for(t.max_code=f,o=e.heap_len>>1;o>=1;o--)R(e,n,o);h=s;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],R(e,n,1),l=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=l,n[2*h]=n[2*o]+n[2*l],e.depth[h]=(e.depth[o]>=e.depth[l]?e.depth[o]:e.depth[l])+1,n[2*o+1]=n[2*l+1]=h,e.heap[1]=h++,R(e,n,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const n=t.dyn_tree,i=t.max_code,r=t.stat_desc.static_tree,s=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,h=t.stat_desc.max_length;let f,u,c,d,p,m,w=0;for(d=0;d<=a;d++)e.bl_count[d]=0;for(n[2*e.heap[e.heap_max]+1]=0,f=e.heap_max+1;f<573;f++)u=e.heap[f],d=n[2*n[2*u+1]+1]+1,d>h&&(d=h,w++),n[2*u+1]=d,u>i||(e.bl_count[d]++,p=0,u>=l&&(p=o[u-l]),m=n[2*u],e.opt_len+=m*(d+p),s&&(e.static_len+=m*(r[2*u+1]+p)));if(0!==w){do{for(d=h-1;0===e.bl_count[d];)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[h]--,w-=2}while(w>0);for(d=h;0!==d;d--)for(u=e.bl_count[d];0!==u;)c=e.heap[--f],c>i||(n[2*c+1]!==d&&(e.opt_len+=(d-n[2*c+1])*n[2*c],n[2*c+1]=d),u--)}})(e,t),E(n,f,e.bl_count)},D=(e,t,n)=>{let i,r,a=-1,s=t[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),t[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=t[2*(i+1)+1],++o<l&&r===s||(o<h?e.bl_tree[2*r]+=o:0!==r?(r!==a&&e.bl_tree[2*r]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=r,0===s?(l=138,h=3):r===s?(l=6,h=3):(l=7,h=4))},S=(e,t,n)=>{let i,r,a=-1,s=t[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),i=0;i<=n;i++)if(r=s,s=t[2*(i+1)+1],!(++o<l&&r===s)){if(o<h)do{N(e,r,e.bl_tree)}while(0!=--o);else 0!==r?(r!==a&&(N(e,r,e.bl_tree),o--),N(e,16,e.bl_tree),T(e,o-3,2)):o<=10?(N(e,17,e.bl_tree),T(e,o-3,3)):(N(e,18,e.bl_tree),T(e,o-11,7));o=0,a=r,0===s?(l=138,h=3):r===s?(l=6,h=3):(l=7,h=4)}};let L=!1;const F=(e,t,n,i)=>{T(e,0+(i?1:0),3),((e,t,n,i)=>{x(e),i&&(v(e,n),v(e,~n)),e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n})(e,t,n,!0)};var j={_tr_init:e=>{L||((()=>{let e,t,n,h,_;const k=new Array(16);for(n=0,h=0;h<28;h++)for(p[h]=n,e=0;e<1<<s[h];e++)d[n++]=h;for(d[n-1]=h,_=0,h=0;h<16;h++)for(m[h]=_,e=0;e<1<<o[h];e++)c[_++]=h;for(_>>=7;h<r;h++)for(m[h]=_<<7,e=0;e<1<<o[h]-7;e++)c[256+_++]=h;for(t=0;t<=a;t++)k[t]=0;for(e=0;e<=143;)f[2*e+1]=8,e++,k[8]++;for(;e<=255;)f[2*e+1]=9,e++,k[9]++;for(;e<=279;)f[2*e+1]=7,e++,k[7]++;for(;e<=287;)f[2*e+1]=8,e++,k[8]++;for(E(f,287,k),e=0;e<r;e++)u[2*e+1]=5,u[2*e]=B(e,5);g=new w(f,s,257,i,a),b=new w(u,o,0,r,a),y=new w(new Array(0),l,0,19,7)})(),L=!0),e.l_desc=new _(e.dyn_ltree,g),e.d_desc=new _(e.dyn_dtree,b),e.bl_desc=new _(e.bl_tree,y),e.bi_buf=0,e.bi_valid=0,U(e)},_tr_stored_block:F,_tr_flush_block:(e,t,i,r)=>{let a,s,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<n;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),A(e,e.l_desc),A(e,e.d_desc),o=(e=>{let t;for(D(e,e.dyn_ltree,e.l_desc.max_code),D(e,e.dyn_dtree,e.d_desc.max_code),A(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*h[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,s=e.static_len+3+7>>>3,s<=a&&(a=s)):a=s=i+5,i+4<=a&&-1!==t?F(e,t,i,r):4===e.strategy||s===a?(T(e,2+(r?1:0),3),O(e,f,u)):(T(e,4+(r?1:0),3),((e,t,n,i)=>{let r;for(T(e,t-257,5),T(e,n-1,5),T(e,i-4,4),r=0;r<i;r++)T(e,e.bl_tree[2*h[r]+1],3);S(e,e.dyn_ltree,t-1),S(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),O(e,e.dyn_ltree,e.dyn_dtree)),U(e),r&&x(e)},_tr_tally:(e,t,i)=>(e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&i,e.last_lit++,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(d[i]+n+1)]++,e.dyn_dtree[2*k(t)]++),e.last_lit===e.lit_bufsize-1),_tr_align:e=>{T(e,2,3),N(e,256,f),(e=>{16===e.bi_valid?(v(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var z=(e,t,n,i)=>{let r=65535&e|0,a=e>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{r=r+t[i++]|0,a=a+r|0}while(--s);r%=65521,a%=65521}return r|a<<16|0};const C=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t})());var $=(e,t,n,i)=>{const r=C,a=i+n;e^=-1;for(let n=i;n<a;n++)e=e>>>8^r[255&(e^t[n])];return-1^e},W={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},V={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Z,_tr_stored_block:P,_tr_flush_block:M,_tr_tally:K,_tr_align:J}=j,{Z_NO_FLUSH:X,Z_PARTIAL_FLUSH:G,Z_FULL_FLUSH:H,Z_FINISH:Y,Z_BLOCK:q,Z_OK:Q,Z_STREAM_END:ee,Z_STREAM_ERROR:te,Z_DATA_ERROR:ne,Z_BUF_ERROR:ie,Z_DEFAULT_COMPRESSION:re,Z_FILTERED:ae,Z_HUFFMAN_ONLY:se,Z_RLE:oe,Z_FIXED:le,Z_DEFAULT_STRATEGY:he,Z_UNKNOWN:fe,Z_DEFLATED:ue}=V,ce=258,de=262,pe=103,me=113,we=666,ge=(e,t)=>(e.msg=W[t],t),be=e=>(e<<1)-(e>4?9:0),ye=e=>{let t=e.length;for(;--t>=0;)e[t]=0};let _e=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask;const ke=e=>{const t=e.state;let n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ve=(e,t)=>{M(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ke(e.strm)},Te=(e,t)=>{e.pending_buf[e.pending++]=t},Ne=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Be=(e,t,n,i)=>{let r=e.avail_in;return r>i&&(r=i),0===r?0:(e.avail_in-=r,t.set(e.input.subarray(e.next_in,e.next_in+r),n),1===e.state.wrap?e.adler=z(e.adler,t,r,n):2===e.state.wrap&&(e.adler=$(e.adler,t,r,n)),e.next_in+=r,e.total_in+=r,r)},Ee=(e,t)=>{let n,i,r=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-de?e.strstart-(e.w_size-de):0,h=e.window,f=e.w_mask,u=e.prev,c=e.strstart+ce;let d=h[a+s-1],p=h[a+s];e.prev_length>=e.good_match&&(r>>=2),o>e.lookahead&&(o=e.lookahead);do{if(n=t,h[n+s]===p&&h[n+s-1]===d&&h[n]===h[a]&&h[++n]===h[a+1]){a+=2,n++;do{}while(h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&h[++a]===h[++n]&&a<c);if(i=ce-(c-a),a=c-ce,i>s){if(e.match_start=t,s=i,i>=o)break;d=h[a+s-1],p=h[a+s]}}}while((t=u[t&f])>l&&0!=--r);return s<=e.lookahead?s:e.lookahead},Ue=e=>{const t=e.w_size;let n,i,r,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-de)){e.window.set(e.window.subarray(t,t+t),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,n=i;do{r=e.head[--n],e.head[n]=r>=t?r-t:0}while(--i);i=t,n=i;do{r=e.prev[--n],e.prev[n]=r>=t?r-t:0}while(--i);a+=t}if(0===e.strm.avail_in)break;if(i=Be(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=3)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=_e(e,e.ins_h,e.window[s+1]);e.insert&&(e.ins_h=_e(e,e.ins_h,e.window[s+3-1]),e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<de&&0!==e.strm.avail_in)},xe=(e,t)=>{let n,i;for(;;){if(e.lookahead<de){if(Ue(e),e.lookahead<de&&t===X)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=_e(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-de&&(e.match_length=Ee(e,n)),e.match_length>=3)if(i=K(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=_e(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=_e(e,e.ins_h,e.window[e.strstart+1]);else i=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2},Ie=(e,t)=>{let n,i,r;for(;;){if(e.lookahead<de){if(Ue(e),e.lookahead<de&&t===X)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=_e(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-de&&(e.match_length=Ee(e,n),e.match_length<=5&&(e.strategy===ae||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){r=e.strstart+e.lookahead-3,i=K(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=r&&(e.ins_h=_e(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(ve(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=K(e,0,e.window[e.strstart-1]),i&&ve(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=K(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2};function Re(e,t,n,i,r){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=i,this.func=r}const Oe=[new Re(0,0,0,0,((e,t)=>{let n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Ue(e),0===e.lookahead&&t===X)return 1;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;const i=e.block_start+n;if((0===e.strstart||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,ve(e,!1),0===e.strm.avail_out))return 1;if(e.strstart-e.block_start>=e.w_size-de&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):(e.strstart>e.block_start&&(ve(e,!1),e.strm.avail_out),1)})),new Re(4,4,8,4,xe),new Re(4,5,16,8,xe),new Re(4,6,32,32,xe),new Re(4,4,16,16,Ie),new Re(8,16,32,32,Ie),new Re(8,16,128,128,Ie),new Re(8,32,128,256,Ie),new Re(32,128,258,1024,Ie),new Re(32,258,258,4096,Ie)];function Ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ue,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ye(this.dyn_ltree),ye(this.dyn_dtree),ye(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ye(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ye(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const De=e=>{if(!e||!e.state)return ge(e,te);e.total_in=e.total_out=0,e.data_type=fe;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?42:me,e.adler=2===t.wrap?0:1,t.last_flush=X,Z(t),Q},Se=e=>{const t=De(e);var n;return t===Q&&((n=e.state).window_size=2*n.w_size,ye(n.head),n.max_lazy_match=Oe[n.level].max_lazy,n.good_match=Oe[n.level].good_length,n.nice_match=Oe[n.level].nice_length,n.max_chain_length=Oe[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),t},Le=(e,t,n,i,r,a)=>{if(!e)return te;let s=1;if(t===re&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||n!==ue||i<8||i>15||t<0||t>9||a<0||a>le)return ge(e,te);8===i&&(i=9);const o=new Ae;return e.state=o,o.strm=e,o.wrap=s,o.gzhead=null,o.w_bits=i,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=r+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<r+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.d_buf=1*o.lit_bufsize,o.l_buf=3*o.lit_bufsize,o.level=t,o.strategy=a,o.method=n,Se(e)};var Fe={deflateInit:(e,t)=>Le(e,t,ue,15,8,he),deflateInit2:Le,deflateReset:Se,deflateResetKeep:De,deflateSetHeader:(e,t)=>e&&e.state?2!==e.state.wrap?te:(e.state.gzhead=t,Q):te,deflate:(e,t)=>{let n,i;if(!e||!e.state||t>q||t<0)return e?ge(e,te):te;const r=e.state;if(!e.output||!e.input&&0!==e.avail_in||r.status===we&&t!==Y)return ge(e,0===e.avail_out?ie:te);r.strm=e;const a=r.last_flush;if(r.last_flush=t,42===r.status)if(2===r.wrap)e.adler=0,Te(r,31),Te(r,139),Te(r,8),r.gzhead?(Te(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Te(r,255&r.gzhead.time),Te(r,r.gzhead.time>>8&255),Te(r,r.gzhead.time>>16&255),Te(r,r.gzhead.time>>24&255),Te(r,9===r.level?2:r.strategy>=se||r.level<2?4:0),Te(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Te(r,255&r.gzhead.extra.length),Te(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=$(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69):(Te(r,0),Te(r,0),Te(r,0),Te(r,0),Te(r,0),Te(r,9===r.level?2:r.strategy>=se||r.level<2?4:0),Te(r,3),r.status=me);else{let t=ue+(r.w_bits-8<<4)<<8,n=-1;n=r.strategy>=se||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=n<<6,0!==r.strstart&&(t|=32),t+=31-t%31,r.status=me,Ne(r,t),0!==r.strstart&&(Ne(r,e.adler>>>16),Ne(r,65535&e.adler)),e.adler=1}if(69===r.status)if(r.gzhead.extra){for(n=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>n&&(e.adler=$(e.adler,r.pending_buf,r.pending-n,n)),ke(e),n=r.pending,r.pending!==r.pending_buf_size));)Te(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>n&&(e.adler=$(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=73)}else r.status=73;if(73===r.status)if(r.gzhead.name){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=$(e.adler,r.pending_buf,r.pending-n,n)),ke(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Te(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=$(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.gzindex=0,r.status=91)}else r.status=91;if(91===r.status)if(r.gzhead.comment){n=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>n&&(e.adler=$(e.adler,r.pending_buf,r.pending-n,n)),ke(e),n=r.pending,r.pending===r.pending_buf_size)){i=1;break}i=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Te(r,i)}while(0!==i);r.gzhead.hcrc&&r.pending>n&&(e.adler=$(e.adler,r.pending_buf,r.pending-n,n)),0===i&&(r.status=pe)}else r.status=pe;if(r.status===pe&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&ke(e),r.pending+2<=r.pending_buf_size&&(Te(r,255&e.adler),Te(r,e.adler>>8&255),e.adler=0,r.status=me)):r.status=me),0!==r.pending){if(ke(e),0===e.avail_out)return r.last_flush=-1,Q}else if(0===e.avail_in&&be(t)<=be(a)&&t!==Y)return ge(e,ie);if(r.status===we&&0!==e.avail_in)return ge(e,ie);if(0!==e.avail_in||0!==r.lookahead||t!==X&&r.status!==we){let n=r.strategy===se?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(Ue(e),0===e.lookahead)){if(t===X)return 1;break}if(e.match_length=0,n=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===oe?((e,t)=>{let n,i,r,a;const s=e.window;for(;;){if(e.lookahead<=ce){if(Ue(e),e.lookahead<=ce&&t===X)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=e.strstart-1,i=s[r],i===s[++r]&&i===s[++r]&&i===s[++r])){a=e.strstart+ce;do{}while(i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&i===s[++r]&&r<a);e.match_length=ce-(a-r),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=K(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ve(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Y?(ve(e,!0),0===e.strm.avail_out?3:4):e.last_lit&&(ve(e,!1),0===e.strm.avail_out)?1:2})(r,t):Oe[r.level].func(r,t);if(3!==n&&4!==n||(r.status=we),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),Q;if(2===n&&(t===G?J(r):t!==q&&(P(r,0,0,!1),t===H&&(ye(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),ke(e),0===e.avail_out))return r.last_flush=-1,Q}return t!==Y?Q:r.wrap<=0?ee:(2===r.wrap?(Te(r,255&e.adler),Te(r,e.adler>>8&255),Te(r,e.adler>>16&255),Te(r,e.adler>>24&255),Te(r,255&e.total_in),Te(r,e.total_in>>8&255),Te(r,e.total_in>>16&255),Te(r,e.total_in>>24&255)):(Ne(r,e.adler>>>16),Ne(r,65535&e.adler)),ke(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?Q:ee)},deflateEnd:e=>{if(!e||!e.state)return te;const t=e.state.status;return 42!==t&&69!==t&&73!==t&&91!==t&&t!==pe&&t!==me&&t!==we?ge(e,te):(e.state=null,t===me?ge(e,ne):Q)},deflateSetDictionary:(e,t)=>{let n=t.length;if(!e||!e.state)return te;const i=e.state,r=i.wrap;if(2===r||1===r&&42!==i.status||i.lookahead)return te;if(1===r&&(e.adler=z(e.adler,t,n,0)),i.wrap=0,n>=i.w_size){0===r&&(ye(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(n-i.w_size,n),0),t=e,n=i.w_size}const a=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,Ue(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=_e(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,Ue(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=s,e.input=o,e.avail_in=a,i.wrap=r,Q},deflateInfo:"pako deflate (from Nodeca project)"};const je=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ze=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(const t in n)je(n,t)&&(e[t]=n[t])}}return e},Ce=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const n=new Uint8Array(t);for(let t=0,i=0,r=e.length;t<r;t++){let r=e[t];n.set(r,i),i+=r.length}return n};let $e=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){$e=!1}const We=new Uint8Array(256);for(let e=0;e<256;e++)We[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;We[254]=We[254]=1;var Ve=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,n,i,r,a,s=e.length,o=0;for(r=0;r<s;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),o+=n<128?1:n<2048?2:n<65536?3:4;for(t=new Uint8Array(o),a=0,r=0;a<o;r++)n=e.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=e.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?t[a++]=n:n<2048?(t[a++]=192|n>>>6,t[a++]=128|63&n):n<65536?(t[a++]=224|n>>>12,t[a++]=128|n>>>6&63,t[a++]=128|63&n):(t[a++]=240|n>>>18,t[a++]=128|n>>>12&63,t[a++]=128|n>>>6&63,t[a++]=128|63&n);return t},Ze=(e,t)=>{const n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,r;const a=new Array(2*n);for(r=0,i=0;i<n;){let t=e[i++];if(t<128){a[r++]=t;continue}let s=We[t];if(s>4)a[r++]=65533,i+=s-1;else{for(t&=2===s?31:3===s?15:7;s>1&&i<n;)t=t<<6|63&e[i++],s--;s>1?a[r++]=65533:t<65536?a[r++]=t:(t-=65536,a[r++]=55296|t>>10&1023,a[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&$e)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let i=0;i<t;i++)n+=String.fromCharCode(e[i]);return n})(a,r)},Pe=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&128==(192&e[n]);)n--;return n<0||0===n?t:n+We[e[n]]>t?n:t};var Me=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Ke=Object.prototype.toString,{Z_NO_FLUSH:Je,Z_SYNC_FLUSH:Xe,Z_FULL_FLUSH:Ge,Z_FINISH:He,Z_OK:Ye,Z_STREAM_END:qe,Z_DEFAULT_COMPRESSION:Qe,Z_DEFAULT_STRATEGY:et,Z_DEFLATED:tt}=V;function nt(e){this.options=ze({level:Qe,method:tt,chunkSize:16384,windowBits:15,memLevel:8,strategy:et},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Me,this.strm.avail_out=0;let n=Fe.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==Ye)throw new Error(W[n]);if(t.header&&Fe.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?Ve(t.dictionary):"[object ArrayBuffer]"===Ke.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,n=Fe.deflateSetDictionary(this.strm,e),n!==Ye)throw new Error(W[n]);this._dict_set=!0}}function it(e,t){const n=new nt(t);if(n.push(e,!0),n.err)throw n.msg||W[n.err];return n.result}nt.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize;let r,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?He:Je,"string"==typeof e?n.input=Ve(e):"[object ArrayBuffer]"===Ke.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),(a===Xe||a===Ge)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(r=Fe.deflate(n,a),r===qe)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),r=Fe.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===Ye;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},nt.prototype.onData=function(e){this.chunks.push(e)},nt.prototype.onEnd=function(e){e===Ye&&(this.result=Ce(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var rt={Deflate:nt,deflate:it,deflateRaw:function(e,t){return(t=t||{}).raw=!0,it(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,it(e,t)},constants:V};var at=function(e,t){let n,i,r,a,s,o,l,h,f,u,c,d,p,m,w,g,b,y,_,k,v,T,N,B;const E=e.state;n=e.next_in,N=e.input,i=n+(e.avail_in-5),r=e.next_out,B=e.output,a=r-(t-e.avail_out),s=r+(e.avail_out-257),o=E.dmax,l=E.wsize,h=E.whave,f=E.wnext,u=E.window,c=E.hold,d=E.bits,p=E.lencode,m=E.distcode,w=(1<<E.lenbits)-1,g=(1<<E.distbits)-1;e:do{d<15&&(c+=N[n++]<<d,d+=8,c+=N[n++]<<d,d+=8),b=p[c&w];t:for(;;){if(y=b>>>24,c>>>=y,d-=y,y=b>>>16&255,0===y)B[r++]=65535&b;else{if(!(16&y)){if(0==(64&y)){b=p[(65535&b)+(c&(1<<y)-1)];continue t}if(32&y){E.mode=12;break e}e.msg="invalid literal/length code",E.mode=30;break e}_=65535&b,y&=15,y&&(d<y&&(c+=N[n++]<<d,d+=8),_+=c&(1<<y)-1,c>>>=y,d-=y),d<15&&(c+=N[n++]<<d,d+=8,c+=N[n++]<<d,d+=8),b=m[c&g];n:for(;;){if(y=b>>>24,c>>>=y,d-=y,y=b>>>16&255,!(16&y)){if(0==(64&y)){b=m[(65535&b)+(c&(1<<y)-1)];continue n}e.msg="invalid distance code",E.mode=30;break e}if(k=65535&b,y&=15,d<y&&(c+=N[n++]<<d,d+=8,d<y&&(c+=N[n++]<<d,d+=8)),k+=c&(1<<y)-1,k>o){e.msg="invalid distance too far back",E.mode=30;break e}if(c>>>=y,d-=y,y=r-a,k>y){if(y=k-y,y>h&&E.sane){e.msg="invalid distance too far back",E.mode=30;break e}if(v=0,T=u,0===f){if(v+=l-y,y<_){_-=y;do{B[r++]=u[v++]}while(--y);v=r-k,T=B}}else if(f<y){if(v+=l+f-y,y-=f,y<_){_-=y;do{B[r++]=u[v++]}while(--y);if(v=0,f<_){y=f,_-=y;do{B[r++]=u[v++]}while(--y);v=r-k,T=B}}}else if(v+=f-y,y<_){_-=y;do{B[r++]=u[v++]}while(--y);v=r-k,T=B}for(;_>2;)B[r++]=T[v++],B[r++]=T[v++],B[r++]=T[v++],_-=3;_&&(B[r++]=T[v++],_>1&&(B[r++]=T[v++]))}else{v=r-k;do{B[r++]=B[v++],B[r++]=B[v++],B[r++]=B[v++],_-=3}while(_>2);_&&(B[r++]=B[v++],_>1&&(B[r++]=B[v++]))}break}}break}}while(n<i&&r<s);_=d>>3,n-=_,d-=_<<3,c&=(1<<d)-1,e.next_in=n,e.next_out=r,e.avail_in=n<i?i-n+5:5-(n-i),e.avail_out=r<s?s-r+257:257-(r-s),E.hold=c,E.bits=d};const st=15,ot=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lt=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ht=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ft=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var ut=(e,t,n,i,r,a,s,o)=>{const l=o.bits;let h,f,u,c,d,p,m=0,w=0,g=0,b=0,y=0,_=0,k=0,v=0,T=0,N=0,B=null,E=0;const U=new Uint16Array(16),x=new Uint16Array(16);let I,R,O,A=null,D=0;for(m=0;m<=st;m++)U[m]=0;for(w=0;w<i;w++)U[t[n+w]]++;for(y=l,b=st;b>=1&&0===U[b];b--);if(y>b&&(y=b),0===b)return r[a++]=20971520,r[a++]=20971520,o.bits=1,0;for(g=1;g<b&&0===U[g];g++);for(y<g&&(y=g),v=1,m=1;m<=st;m++)if(v<<=1,v-=U[m],v<0)return-1;if(v>0&&(0===e||1!==b))return-1;for(x[1]=0,m=1;m<st;m++)x[m+1]=x[m]+U[m];for(w=0;w<i;w++)0!==t[n+w]&&(s[x[t[n+w]]++]=w);if(0===e?(B=A=s,p=19):1===e?(B=ot,E-=257,A=lt,D-=257,p=256):(B=ht,A=ft,p=-1),N=0,w=0,m=g,d=a,_=y,k=0,u=-1,T=1<<y,c=T-1,1===e&&T>852||2===e&&T>592)return 1;for(;;){I=m-k,s[w]<p?(R=0,O=s[w]):s[w]>p?(R=A[D+s[w]],O=B[E+s[w]]):(R=96,O=0),h=1<<m-k,f=1<<_,g=f;do{f-=h,r[d+(N>>k)+f]=I<<24|R<<16|O|0}while(0!==f);for(h=1<<m-1;N&h;)h>>=1;if(0!==h?(N&=h-1,N+=h):N=0,w++,0==--U[m]){if(m===b)break;m=t[n+s[w]]}if(m>y&&(N&c)!==u){for(0===k&&(k=y),d+=g,_=m-k,v=1<<_;_+k<b&&(v-=U[_+k],!(v<=0));)_++,v<<=1;if(T+=1<<_,1===e&&T>852||2===e&&T>592)return 1;u=N&c,r[u]=y<<24|_<<16|d-a|0}}return 0!==N&&(r[d+N]=m-k<<24|64<<16|0),o.bits=y,0};const{Z_FINISH:ct,Z_BLOCK:dt,Z_TREES:pt,Z_OK:mt,Z_STREAM_END:wt,Z_NEED_DICT:gt,Z_STREAM_ERROR:bt,Z_DATA_ERROR:yt,Z_MEM_ERROR:_t,Z_BUF_ERROR:kt,Z_DEFLATED:vt}=V,Tt=12,Nt=30,Bt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Et(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ut=e=>{if(!e||!e.state)return bt;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=1,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,mt},xt=e=>{if(!e||!e.state)return bt;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,Ut(e)},It=(e,t)=>{let n;if(!e||!e.state)return bt;const i=e.state;return t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?bt:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=n,i.wbits=t,xt(e))},Rt=(e,t)=>{if(!e)return bt;const n=new Et;e.state=n,n.window=null;const i=It(e,t);return i!==mt&&(e.state=null),i};let Ot,At,Dt=!0;const St=e=>{if(Dt){Ot=new Int32Array(512),At=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(ut(1,e.lens,0,288,Ot,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;ut(2,e.lens,0,32,At,0,e.work,{bits:5}),Dt=!1}e.lencode=Ot,e.lenbits=9,e.distcode=At,e.distbits=5},Lt=(e,t,n,i)=>{let r;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),a.window.set(t.subarray(n-i,n-i+r),a.wnext),(i-=r)?(a.window.set(t.subarray(n-i,n),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0};var Ft={inflateReset:xt,inflateReset2:It,inflateResetKeep:Ut,inflateInit:e=>Rt(e,15),inflateInit2:Rt,inflate:(e,t)=>{let n,i,r,a,s,o,l,h,f,u,c,d,p,m,w,g,b,y,_,k,v,T,N=0;const B=new Uint8Array(4);let E,U;const x=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return bt;n=e.state,n.mode===Tt&&(n.mode=13),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,h=n.hold,f=n.bits,u=o,c=l,T=mt;e:for(;;)switch(n.mode){case 1:if(0===n.wrap){n.mode=13;break}for(;f<16;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if(2&n.wrap&&35615===h){n.check=0,B[0]=255&h,B[1]=h>>>8&255,n.check=$(n.check,B,2,0),h=0,f=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&h)<<8)+(h>>8))%31){e.msg="incorrect header check",n.mode=Nt;break}if((15&h)!==vt){e.msg="unknown compression method",n.mode=Nt;break}if(h>>>=4,f-=4,v=8+(15&h),0===n.wbits)n.wbits=v;else if(v>n.wbits){e.msg="invalid window size",n.mode=Nt;break}n.dmax=1<<n.wbits,e.adler=n.check=1,n.mode=512&h?10:Tt,h=0,f=0;break;case 2:for(;f<16;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if(n.flags=h,(255&n.flags)!==vt){e.msg="unknown compression method",n.mode=Nt;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=Nt;break}n.head&&(n.head.text=h>>8&1),512&n.flags&&(B[0]=255&h,B[1]=h>>>8&255,n.check=$(n.check,B,2,0)),h=0,f=0,n.mode=3;case 3:for(;f<32;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}n.head&&(n.head.time=h),512&n.flags&&(B[0]=255&h,B[1]=h>>>8&255,B[2]=h>>>16&255,B[3]=h>>>24&255,n.check=$(n.check,B,4,0)),h=0,f=0,n.mode=4;case 4:for(;f<16;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}n.head&&(n.head.xflags=255&h,n.head.os=h>>8),512&n.flags&&(B[0]=255&h,B[1]=h>>>8&255,n.check=$(n.check,B,2,0)),h=0,f=0,n.mode=5;case 5:if(1024&n.flags){for(;f<16;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}n.length=h,n.head&&(n.head.extra_len=h),512&n.flags&&(B[0]=255&h,B[1]=h>>>8&255,n.check=$(n.check,B,2,0)),h=0,f=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(d=n.length,d>o&&(d=o),d&&(n.head&&(v=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(a,a+d),v)),512&n.flags&&(n.check=$(n.check,i,d,a)),o-=d,a+=d,n.length-=d),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===o)break e;d=0;do{v=i[a+d++],n.head&&v&&n.length<65536&&(n.head.name+=String.fromCharCode(v))}while(v&&d<o);if(512&n.flags&&(n.check=$(n.check,i,d,a)),o-=d,a+=d,v)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===o)break e;d=0;do{v=i[a+d++],n.head&&v&&n.length<65536&&(n.head.comment+=String.fromCharCode(v))}while(v&&d<o);if(512&n.flags&&(n.check=$(n.check,i,d,a)),o-=d,a+=d,v)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;f<16;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if(h!==(65535&n.check)){e.msg="header crc mismatch",n.mode=Nt;break}h=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=Tt;break;case 10:for(;f<32;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}e.adler=n.check=Bt(h),h=0,f=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=h,n.bits=f,gt;e.adler=n.check=1,n.mode=Tt;case Tt:if(t===dt||t===pt)break e;case 13:if(n.last){h>>>=7&f,f-=7&f,n.mode=27;break}for(;f<3;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}switch(n.last=1&h,h>>>=1,f-=1,3&h){case 0:n.mode=14;break;case 1:if(St(n),n.mode=20,t===pt){h>>>=2,f-=2;break e}break;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=Nt}h>>>=2,f-=2;break;case 14:for(h>>>=7&f,f-=7&f;f<32;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if((65535&h)!=(h>>>16^65535)){e.msg="invalid stored block lengths",n.mode=Nt;break}if(n.length=65535&h,h=0,f=0,n.mode=15,t===pt)break e;case 15:n.mode=16;case 16:if(d=n.length,d){if(d>o&&(d=o),d>l&&(d=l),0===d)break e;r.set(i.subarray(a,a+d),s),o-=d,a+=d,l-=d,s+=d,n.length-=d;break}n.mode=Tt;break;case 17:for(;f<14;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if(n.nlen=257+(31&h),h>>>=5,f-=5,n.ndist=1+(31&h),h>>>=5,f-=5,n.ncode=4+(15&h),h>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=Nt;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;f<3;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}n.lens[x[n.have++]]=7&h,h>>>=3,f-=3}for(;n.have<19;)n.lens[x[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,E={bits:n.lenbits},T=ut(0,n.lens,0,19,n.lencode,0,n.work,E),n.lenbits=E.bits,T){e.msg="invalid code lengths set",n.mode=Nt;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;N=n.lencode[h&(1<<n.lenbits)-1],w=N>>>24,g=N>>>16&255,b=65535&N,!(w<=f);){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if(b<16)h>>>=w,f-=w,n.lens[n.have++]=b;else{if(16===b){for(U=w+2;f<U;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if(h>>>=w,f-=w,0===n.have){e.msg="invalid bit length repeat",n.mode=Nt;break}v=n.lens[n.have-1],d=3+(3&h),h>>>=2,f-=2}else if(17===b){for(U=w+3;f<U;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}h>>>=w,f-=w,v=0,d=3+(7&h),h>>>=3,f-=3}else{for(U=w+7;f<U;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}h>>>=w,f-=w,v=0,d=11+(127&h),h>>>=7,f-=7}if(n.have+d>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=Nt;break}for(;d--;)n.lens[n.have++]=v}}if(n.mode===Nt)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=Nt;break}if(n.lenbits=9,E={bits:n.lenbits},T=ut(1,n.lens,0,n.nlen,n.lencode,0,n.work,E),n.lenbits=E.bits,T){e.msg="invalid literal/lengths set",n.mode=Nt;break}if(n.distbits=6,n.distcode=n.distdyn,E={bits:n.distbits},T=ut(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,E),n.distbits=E.bits,T){e.msg="invalid distances set",n.mode=Nt;break}if(n.mode=20,t===pt)break e;case 20:n.mode=21;case 21:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=h,n.bits=f,at(e,c),s=e.next_out,r=e.output,l=e.avail_out,a=e.next_in,i=e.input,o=e.avail_in,h=n.hold,f=n.bits,n.mode===Tt&&(n.back=-1);break}for(n.back=0;N=n.lencode[h&(1<<n.lenbits)-1],w=N>>>24,g=N>>>16&255,b=65535&N,!(w<=f);){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if(g&&0==(240&g)){for(y=w,_=g,k=b;N=n.lencode[k+((h&(1<<y+_)-1)>>y)],w=N>>>24,g=N>>>16&255,b=65535&N,!(y+w<=f);){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}h>>>=y,f-=y,n.back+=y}if(h>>>=w,f-=w,n.back+=w,n.length=b,0===g){n.mode=26;break}if(32&g){n.back=-1,n.mode=Tt;break}if(64&g){e.msg="invalid literal/length code",n.mode=Nt;break}n.extra=15&g,n.mode=22;case 22:if(n.extra){for(U=n.extra;f<U;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}n.length+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;N=n.distcode[h&(1<<n.distbits)-1],w=N>>>24,g=N>>>16&255,b=65535&N,!(w<=f);){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if(0==(240&g)){for(y=w,_=g,k=b;N=n.distcode[k+((h&(1<<y+_)-1)>>y)],w=N>>>24,g=N>>>16&255,b=65535&N,!(y+w<=f);){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}h>>>=y,f-=y,n.back+=y}if(h>>>=w,f-=w,n.back+=w,64&g){e.msg="invalid distance code",n.mode=Nt;break}n.offset=b,n.extra=15&g,n.mode=24;case 24:if(n.extra){for(U=n.extra;f<U;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}n.offset+=h&(1<<n.extra)-1,h>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=Nt;break}n.mode=25;case 25:if(0===l)break e;if(d=c-l,n.offset>d){if(d=n.offset-d,d>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=Nt;break}d>n.wnext?(d-=n.wnext,p=n.wsize-d):p=n.wnext-d,d>n.length&&(d=n.length),m=n.window}else m=r,p=s-n.offset,d=n.length;d>l&&(d=l),l-=d,n.length-=d;do{r[s++]=m[p++]}while(--d);0===n.length&&(n.mode=21);break;case 26:if(0===l)break e;r[s++]=n.length,l--,n.mode=21;break;case 27:if(n.wrap){for(;f<32;){if(0===o)break e;o--,h|=i[a++]<<f,f+=8}if(c-=l,e.total_out+=c,n.total+=c,c&&(e.adler=n.check=n.flags?$(n.check,r,c,s-c):z(n.check,r,c,s-c)),c=l,(n.flags?h:Bt(h))!==n.check){e.msg="incorrect data check",n.mode=Nt;break}h=0,f=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;f<32;){if(0===o)break e;o--,h+=i[a++]<<f,f+=8}if(h!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=Nt;break}h=0,f=0}n.mode=29;case 29:T=wt;break e;case Nt:T=yt;break e;case 31:return _t;case 32:default:return bt}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,n.hold=h,n.bits=f,(n.wsize||c!==e.avail_out&&n.mode<Nt&&(n.mode<27||t!==ct))&&Lt(e,e.output,e.next_out,c-e.avail_out),u-=e.avail_in,c-=e.avail_out,e.total_in+=u,e.total_out+=c,n.total+=c,n.wrap&&c&&(e.adler=n.check=n.flags?$(n.check,r,c,e.next_out-c):z(n.check,r,c,e.next_out-c)),e.data_type=n.bits+(n.last?64:0)+(n.mode===Tt?128:0)+(20===n.mode||15===n.mode?256:0),(0===u&&0===c||t===ct)&&T===mt&&(T=kt),T},inflateEnd:e=>{if(!e||!e.state)return bt;let t=e.state;return t.window&&(t.window=null),e.state=null,mt},inflateGetHeader:(e,t)=>{if(!e||!e.state)return bt;const n=e.state;return 0==(2&n.wrap)?bt:(n.head=t,t.done=!1,mt)},inflateSetDictionary:(e,t)=>{const n=t.length;let i,r,a;return e&&e.state?(i=e.state,0!==i.wrap&&11!==i.mode?bt:11===i.mode&&(r=1,r=z(r,t,n,0),r!==i.check)?yt:(a=Lt(e,t,n,n),a?(i.mode=31,_t):(i.havedict=1,mt))):bt},inflateInfo:"pako inflate (from Nodeca project)"};var jt=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const zt=Object.prototype.toString,{Z_NO_FLUSH:Ct,Z_FINISH:$t,Z_OK:Wt,Z_STREAM_END:Vt,Z_NEED_DICT:Zt,Z_STREAM_ERROR:Pt,Z_DATA_ERROR:Mt,Z_MEM_ERROR:Kt}=V;function Jt(e){this.options=ze({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Me,this.strm.avail_out=0;let n=Ft.inflateInit2(this.strm,t.windowBits);if(n!==Wt)throw new Error(W[n]);if(this.header=new jt,Ft.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=Ve(t.dictionary):"[object ArrayBuffer]"===zt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(n=Ft.inflateSetDictionary(this.strm,t.dictionary),n!==Wt)))throw new Error(W[n])}function Xt(e,t){const n=new Jt(t);if(n.push(e),n.err)throw n.msg||W[n.err];return n.result}Jt.prototype.push=function(e,t){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=t===~~t?t:!0===t?$t:Ct,"[object ArrayBuffer]"===zt.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),a=Ft.inflate(n,s),a===Zt&&r&&(a=Ft.inflateSetDictionary(n,r),a===Wt?a=Ft.inflate(n,s):a===Mt&&(a=Zt));n.avail_in>0&&a===Vt&&n.state.wrap>0&&0!==e[n.next_in];)Ft.inflateReset(n),a=Ft.inflate(n,s);switch(a){case Pt:case Mt:case Zt:case Kt:return this.onEnd(a),this.ended=!0,!1}if(o=n.avail_out,n.next_out&&(0===n.avail_out||a===Vt))if("string"===this.options.to){let e=Pe(n.output,n.next_out),t=n.next_out-e,r=Ze(n.output,e);n.next_out=t,n.avail_out=i-t,t&&n.output.set(n.output.subarray(e,e+t),0),this.onData(r)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==Wt||0!==o){if(a===Vt)return a=Ft.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},Jt.prototype.onData=function(e){this.chunks.push(e)},Jt.prototype.onEnd=function(e){e===Wt&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=Ce(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Gt={Inflate:Jt,inflate:Xt,inflateRaw:function(e,t){return(t=t||{}).raw=!0,Xt(e,t)},ungzip:Xt,constants:V};const{Deflate:Ht,deflate:Yt,deflateRaw:qt,gzip:Qt}=rt,{Inflate:en,inflate:tn,inflateRaw:nn,ungzip:rn}=Gt;var an=Ht,sn=Yt,on=qt,ln=Qt,hn=en,fn=tn,un=nn,cn=rn,dn=V,pn={Deflate:an,deflate:sn,deflateRaw:on,gzip:ln,Inflate:hn,inflate:fn,inflateRaw:un,ungzip:cn,constants:dn};e.Deflate=an,e.Inflate=hn,e.constants=dn,e.default=pn,e.deflate=sn,e.deflateRaw=on,e.gzip=ln,e.inflate=fn,e.inflateRaw=un,e.ungzip=cn,Object.defineProperty(e,"__esModule",{value:!0})}));let Re=q.slice(0,5);a=q.slice(5);switch(Re?.[0]){case 0:break;case 1:a=pako.ungzip(a);Re[0]=0;break};switch(t){case"grpc.biliapi.net":case"app.bilibili.com":class Oe extends xe{constructor(){super("google.protobuf.Any",[{no:1,name:"type_url",kind:"scalar",T:9},{no:2,name:"value",kind:"scalar",T:12}])}pack(e,t){return{typeUrl:this.typeNameToUrl(t.typeName),value:t.toBinary(e)}}unpack(e,t,n){if(!this.contains(e,t))throw new Error("Cannot unpack google.protobuf.Any with typeUrl '"+e.typeUrl+"' as "+t.typeName+".");return t.fromBinary(e.value,n)}contains(e,t){if(!e.typeUrl.length)return false;let n=typeof t=="string"?t:t.typeName;let i=this.typeUrlToName(e.typeUrl);return n===i}internalJsonWrite(e,t){if(e.typeUrl==="")return{};let n=this.typeUrlToName(e.typeUrl);let i=K(t);let r=i.typeRegistry?.find((e=>e.typeName===n));if(!r)throw new globalThis.Error("Unable to convert google.protobuf.Any with typeUrl '"+e.typeUrl+"' to JSON. The specified type "+n+" is not available in the type registry.");let a=r.fromBinary(e.value,{readUnknownField:false});let s=r.internalJsonWrite(a,i);if(n.startsWith("google.protobuf.")||!z(s))s={value:s};s["@type"]=e.typeUrl;return s}internalJsonRead(e,t,n){if(!z(e))throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON "+j(e)+".");if(typeof e["@type"]!="string"||e["@type"]=="")return this.create();let i=this.typeUrlToName(e["@type"]);let r=t?.typeRegistry?.find((e=>e.typeName==i));if(!r)throw new globalThis.Error("Unable to parse google.protobuf.Any from JSON. The specified type "+i+" is not available in the type registry.");let a;if(i.startsWith("google.protobuf.")&&e.hasOwnProperty("value"))a=r.fromJson(e["value"],t);else{let n=Object.assign({},e);delete n["@type"];a=r.fromJson(n,t)}if(n===undefined)n=this.create();n.typeUrl=e["@type"];n.value=r.toBinary(a);return n}typeNameToUrl(e){if(!e.length)throw new Error("invalid type name: "+e);return"type.googleapis.com/"+e}typeUrlToName(e){if(!e.length)throw new Error("invalid type url: "+e);let t=e.lastIndexOf("/");let n=t>0?e.substring(t+1):e;if(!n.length)throw new Error("invalid type url: "+e);return n}create(e){const t={typeUrl:"",value:new Uint8Array(0)};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.typeUrl=e.string();break;case 2:r.value=e.bytes();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.typeUrl!=="")t.tag(1,o.LengthDelimited).string(e.typeUrl);if(e.value.length)t.tag(2,o.LengthDelimited).bytes(e.value);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Ae=new Oe;class De extends xe{constructor(){super("CM",[{no:1,name:"source_content",kind:"message",T:()=>Ae}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.sourceContent=Ae.internalBinaryRead(e,e.uint32(),n,r.sourceContent);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.sourceContent)Ae.internalBinaryWrite(e.sourceContent,t.tag(1,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Se=new De;switch(i?.[0]){case"bilibili.app.playurl.v1.PlayURL":switch(i?.[1]){case"PlayView":class wt extends xe{constructor(){super("PlayViewReply",[{no:5,name:"play_arc",kind:"message",T:()=>yt}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 5:r.playArc=yt.internalBinaryRead(e,e.uint32(),n,r.playArc);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.playArc)yt.internalBinaryWrite(e.playArc,t.tag(5,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const gt=new wt;class bt extends xe{constructor(){super("PlayArcConf",[{no:1,name:"background_play_conf",kind:"message",T:()=>kt}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.backgroundPlayConf=kt.internalBinaryRead(e,e.uint32(),n,r.backgroundPlayConf);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.backgroundPlayConf)kt.internalBinaryWrite(e.backgroundPlayConf,t.tag(1,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const yt=new bt;class _t extends xe{constructor(){super("ArcConf",[{no:1,name:"is_support",kind:"scalar",T:8},{no:2,name:"disabled",kind:"scalar",T:8},{no:3,name:"extra_content",kind:"message",T:()=>Tt}])}create(e){const t={isSupport:false,disabled:false};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.isSupport=e.bool();break;case 2:r.disabled=e.bool();break;case 3:r.extraContent=Tt.internalBinaryRead(e,e.uint32(),n,r.extraContent);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.isSupport!==false)t.tag(1,o.Varint).bool(e.isSupport);if(e.disabled!==false)t.tag(2,o.Varint).bool(e.disabled);if(e.extraContent)Tt.internalBinaryWrite(e.extraContent,t.tag(3,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const kt=new _t;class vt extends xe{constructor(){super("ExtraContent",[{no:1,name:"disabled_reason",kind:"scalar",T:9},{no:2,name:"disabled_code",kind:"scalar",T:3,L:0}])}create(e){const t={disabledReason:"",disabledCode:0n};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.disabledReason=e.string();break;case 2:r.disabledCode=e.int64().toBigInt();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.disabledReason!=="")t.tag(1,o.LengthDelimited).string(e.disabledReason);if(e.disabledCode!==0n)t.tag(2,o.Varint).int64(e.disabledCode);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Tt=new vt;let Nt=gt.fromBinary(a);const Bt=Nt.playArc?.backgroundPlayConf;if(Bt&&(!Bt.isSupport||Bt.disabled)){Nt.playArc.backgroundPlayConf.isSupport=true;Nt.playArc.backgroundPlayConf.disabled=false;Nt.playArc.backgroundPlayConf.extraContent=null};a=gt.toBinary(Nt);break;case"PlayConf":break};break;case"bilibili.app.dynamic.v2.Dynamic":var Y;(function(e){e[e["dyn_none"]=0]="dyn_none";e[e["ad"]=15]="ad"})(Y||(Y={}));class Le extends xe{constructor(){super("DynAllReply",[{no:1,name:"dynamic_list",kind:"message",T:()=>$e},{no:2,name:"up_list",kind:"message",T:()=>Ve},{no:3,name:"topic_list",kind:"message",T:()=>Pe}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.dynamicList=$e.internalBinaryRead(e,e.uint32(),n,r.dynamicList);break;case 2:r.upList=Ve.internalBinaryRead(e,e.uint32(),n,r.upList);break;case 3:r.topicList=Pe.internalBinaryRead(e,e.uint32(),n,r.topicList);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.dynamicList)$e.internalBinaryWrite(e.dynamicList,t.tag(1,o.LengthDelimited).fork(),n).join();if(e.upList)Ve.internalBinaryWrite(e.upList,t.tag(2,o.LengthDelimited).fork(),n).join();if(e.topicList)Pe.internalBinaryWrite(e.topicList,t.tag(3,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Fe=new Le;class je extends xe{constructor(){super("DynVideoReply",[{no:2,name:"video_up_list",kind:"message",T:()=>Ve}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 2:r.videoUpList=Ve.internalBinaryRead(e,e.uint32(),n,r.videoUpList);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.videoUpList)Ve.internalBinaryWrite(e.videoUpList,t.tag(2,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const ze=new je;class Ce extends xe{constructor(){super("DynamicList",[{no:1,name:"list",kind:"message",repeat:1,T:()=>Ke}])}create(e){const t={list:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.list.push(Ke.internalBinaryRead(e,e.uint32(),n));break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.list.length;i++)Ke.internalBinaryWrite(e.list[i],t.tag(1,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const $e=new Ce;class We extends xe{constructor(){super("CardVideoUpList",[{no:1,name:"title",kind:"scalar",T:9}])}create(e){const t={title:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.title=e.string();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.title!=="")t.tag(1,o.LengthDelimited).string(e.title);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Ve=new We;class Ze extends xe{constructor(){super("TopicList",[{no:1,name:"title",kind:"scalar",T:9}])}create(e){const t={title:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.title=e.string();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.title!=="")t.tag(1,o.LengthDelimited).string(e.title);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Pe=new Ze;class Me extends xe{constructor(){super("DynamicItem",[{no:1,name:"card_type",kind:"enum",T:()=>["DynamicType",Y]}])}create(e){const t={cardType:0};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.cardType=e.int32();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.cardType!==0)t.tag(1,o.Varint).int32(e.cardType);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Ke=new Me;switch(i?.[1]){case"DynAll":let Et=Fe.fromBinary(a);Hot_topics&&Et.topicList&&(Et.topicList=null);Most_visited&&Et.upList&&(Et.upList=null);if(Et.dynamicList?.list?.length){Et.dynamicList.list=Et.dynamicList.list.filter((e=>{if(e.cardType!==15){return true}return false}))};a=Fe.toBinary(Et);break;case"DynVideo":let Ut=ze.fromBinary(a);Ut.videoUpList&&(Ut.videoUpList=null);a=ze.toBinary(Ut);break}break;case"bilibili.app.view.v1.View":switch(i?.[1]){case"View":class xt extends xe{constructor(){super("ViewReply",[{no:6,name:"t_icon",kind:"map",K:9,V:{kind:"message",T:()=>Lt}},{no:10,name:"relates",kind:"message",repeat:1,T:()=>jt},{no:30,name:"cms",kind:"message",repeat:1,T:()=>He},{no:31,name:"cm_config",kind:"message",T:()=>Ot},{no:41,name:"cm_ipad",kind:"message",T:()=>Dt}])}create(e){const t={tIcon:{},relates:[],cms:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 6:this.binaryReadMap6(r.tIcon,e,n);break;case 10:r.relates.push(jt.internalBinaryRead(e,e.uint32(),n));break;case 30:r.cms.push(He.internalBinaryRead(e,e.uint32(),n));break;case 31:r.cmConfig=Ot.internalBinaryRead(e,e.uint32(),n,r.cmConfig);break;case 41:r.cmIpad=Dt.internalBinaryRead(e,e.uint32(),n,r.cmIpad);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}binaryReadMap6(e,t,n){let i=t.uint32(),r=t.pos+i,a,s;while(t.pos<r){let[e,i]=t.tag();switch(e){case 1:a=t.string();break;case 2:s=Lt.internalBinaryRead(t,t.uint32(),n);break;default:throw new globalThis.Error("unknown map entry field for field ViewReply.t_icon")}}e[a??""]=s??Lt.create()}internalBinaryWrite(e,t,n){for(let i of Object.keys(e.tIcon)){t.tag(6,o.LengthDelimited).fork().tag(1,o.LengthDelimited).string(i);t.tag(2,o.LengthDelimited).fork();Lt.internalBinaryWrite(e.tIcon[i],t,n);t.join().join()}for(let i=0;i<e.relates.length;i++)jt.internalBinaryWrite(e.relates[i],t.tag(10,o.LengthDelimited).fork(),n).join();for(let i=0;i<e.cms.length;i++)He.internalBinaryWrite(e.cms[i],t.tag(30,o.LengthDelimited).fork(),n).join();if(e.cmConfig)Ot.internalBinaryWrite(e.cmConfig,t.tag(31,o.LengthDelimited).fork(),n).join();if(e.cmIpad)Dt.internalBinaryWrite(e.cmIpad,t.tag(41,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const It=new xt;class Rt extends xe{constructor(){super("CMConfig",[{no:1,name:"ads_control",kind:"message",T:()=>Ae}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.adsControl=Ae.internalBinaryRead(e,e.uint32(),n,r.adsControl);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.adsControl)Ae.internalBinaryWrite(e.adsControl,t.tag(1,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Ot=new Rt;class At extends xe{constructor(){super("CmIpad",[{no:5,name:"aid",kind:"scalar",T:3,L:0}])}create(e){const t={aid:0n};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 5:r.aid=e.int64().toBigInt();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.aid!==0n)t.tag(5,o.Varint).int64(e.aid);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Dt=new At;class St extends xe{constructor(){super("TIcon",[{no:1,name:"icon",kind:"scalar",T:9}])}create(e){const t={icon:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.icon=e.string();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.icon!=="")t.tag(1,o.LengthDelimited).string(e.icon);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Lt=new St;class Ft extends xe{constructor(){super("Relate",[{no:28,name:"cm",kind:"message",T:()=>He}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 28:r.cm=He.internalBinaryRead(e,e.uint32(),n,r.cm);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.cm)He.internalBinaryWrite(e.cm,t.tag(28,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const jt=new Ft;let zt=It.fromBinary(a);zt.cms?.length&&(zt.cms=[]);if(zt.relates?.length){zt.relates=zt.relates.filter((e=>{if(e.cm){return false}return true}))}const Ct=zt.cmConfig?.adsControl?.value;if(Boolean(Ct)&&Object.values(Ct).length!==0){delete zt.cmConfig;delete zt.cmIpad}for(const Jt in zt.tIcon){if(zt.tIcon[Jt]===null){delete zt.tIcon[Jt]}}a=It.toBinary(zt);break;case"TFInfo":class $t extends xe{constructor(){super("TFInfoReply",[{no:1,name:"tipsId",kind:"scalar",T:3,L:0},{no:2,name:"tfToast",kind:"message",T:()=>Zt},{no:3,name:"tfPanelCustomized",kind:"message",T:()=>Mt}])}create(e){const t={tipsId:0n};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.tipsId=e.int64().toBigInt();break;case 2:r.tfToast=Zt.internalBinaryRead(e,e.uint32(),n,r.tfToast);break;case 3:r.tfPanelCustomized=Mt.internalBinaryRead(e,e.uint32(),n,r.tfPanelCustomized);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.tipsId!==0n)t.tag(1,o.Varint).int64(e.tipsId);if(e.tfToast)Zt.internalBinaryWrite(e.tfToast,t.tag(2,o.LengthDelimited).fork(),n).join();if(e.tfPanelCustomized)Mt.internalBinaryWrite(e.tfPanelCustomized,t.tag(3,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Wt=new $t;class Vt extends xe{constructor(){super("TFToast",[{no:1,name:"btnText",kind:"scalar",T:9}])}create(e){const t={btnText:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.btnText=e.string();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.btnText!=="")t.tag(1,o.LengthDelimited).string(e.btnText);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Zt=new Vt;class Pt extends xe{constructor(){super("TFPanelCustomized",[{no:2,name:"rightBtnText",kind:"scalar",T:9}])}create(e){const t={rightBtnText:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 2:r.rightBtnText=e.string();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.rightBtnText!=="")t.tag(2,o.LengthDelimited).string(e.rightBtnText);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Mt=new Pt;let Kt=Wt.fromBinary(a);if(Kt?.tipsId){delete Kt.tfToast;delete Kt.tfPanelCustomized}a=Wt.toBinary(Kt);break}break;case"bilibili.app.viewunite.v1.View":class Je extends xe{constructor(){super("bilibili.app.viewunite.v1.ViewReply",[{no:7,name:"cm",kind:"message",T:()=>He}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 7:r.cm=He.internalBinaryRead(e,e.uint32(),n,r.cm);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.cm)He.internalBinaryWrite(e.cm,t.tag(7,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Xe=new Je;class Ge extends xe{constructor(){super("bilibili.app.viewunite.v1.CM",[{no:3,name:"source_content",kind:"message",repeat:1,T:()=>Ae}])}create(e){const t={sourceContent:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 3:r.sourceContent.push(Ae.internalBinaryRead(e,e.uint32(),n));break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.sourceContent.length;i++)Ae.internalBinaryWrite(e.sourceContent[i],t.tag(3,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const He=new Ge;let Ye=Xe.fromBinary(a);if(Ye.cm?.sourceContent?.length){Ye.cm.sourceContent=[]};a=Xe.toBinary(Ye);break;case"bilibili.app.interface.v1.Teenagers":class qe extends xe{constructor(){super("ModeStatus",[{no:1,name:"modes",kind:"message",repeat:1,T:()=>tt}])}create(e){const t={modes:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.modes.push(tt.internalBinaryRead(e,e.uint32(),n));break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.modes.length;i++)tt.internalBinaryWrite(e.modes[i],t.tag(1,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const Qe=new qe;class et extends xe{constructor(){super("Mode",[{no:2,name:"name",kind:"scalar",T:9},{no:5,name:"f5",kind:"message",T:()=>it}])}create(e){const t={name:""};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 2:r.name=e.string();break;case 5:r.f5=it.internalBinaryRead(e,e.uint32(),n,r.f5);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.name!=="")t.tag(2,o.LengthDelimited).string(e.name);if(e.f5)it.internalBinaryWrite(e.f5,t.tag(5,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const tt=new et;class nt extends xe{constructor(){super("F5",[{no:1,name:"f1",kind:"scalar",T:5}])}create(e){const t={f1:0};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.f1=e.int32();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.f1!==0)t.tag(1,o.Varint).int32(e.f1);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const it=new nt;switch(i?.[1]){case"ModeStatus":let Xt=Qe.fromBinary(a);Xt.modes=Xt.modes.map((e=>{if(e?.name==="teenagers"){if(e?.f5?.f1){e.f5.f1=0}}return e}));a=Qe.toBinary(Xt);break};break;case"bilibili.community.service.dm.v1.DM":class rt extends xe{constructor(){super("CommandDm",[{no:1,name:"id",kind:"scalar",T:3,L:0}])}create(e){const t={id:0n};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.id=e.int64().toBigInt();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.id!==0n)t.tag(1,o.Varint).int64(e.id);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const at=new rt;class st extends xe{constructor(){super("DmView",[{no:1,name:"commandDms",kind:"message",repeat:1,T:()=>at}])}create(e){const t={commandDms:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.commandDms.push(at.internalBinaryRead(e,e.uint32(),n));break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.commandDms.length;i++)at.internalBinaryWrite(e.commandDms[i],t.tag(1,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const ot=new st;class lt extends xe{constructor(){super("DmViewReply",[{no:22,name:"dmView",kind:"message",T:()=>ot}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 22:r.dmView=ot.internalBinaryRead(e,e.uint32(),n,r.dmView);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.dmView)ot.internalBinaryWrite(e.dmView,t.tag(22,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const ht=new lt;class ft extends xe{constructor(){super("DmSegMobileReply",[{no:1,name:"elems",kind:"message",repeat:1,T:()=>dt}])}create(e){const t={elems:[]};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 1:r.elems.push(dt.internalBinaryRead(e,e.uint32(),n));break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){for(let i=0;i<e.elems.length;i++)dt.internalBinaryWrite(e.elems[i],t.tag(1,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const ut=new ft;class ct extends xe{constructor(){super("DanmakuElem",[{no:24,name:"colorful",kind:"scalar",T:5}])}create(e){const t={colorful:0};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 24:r.colorful=e.int32();break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.colorful!==0)t.tag(24,o.Varint).int32(e.colorful);let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const dt=new ct;switch(i?.[1]){case"DmView":if(commandDms){let Gt=ht.fromBinary(a);if(Gt.dmView?.commandDms?.length){Gt.dmView.commandDms.length=0}a=ht.toBinary(Gt)};break;case"DmSegMobile":if(colorfulDms){let Ht=ut.fromBinary(a);Ht.elems=Ht.elems.map((e=>{if(e?.colorful===60001){e.colorful=0}return e}));a=ut.toBinary(Ht)};break}break;case"bilibili.main.community.reply.v1.Reply":class pt extends xe{constructor(){super("MainListReply",[{no:11,name:"cm",kind:"message",T:()=>He}])}create(e){const t={};globalThis.Object.defineProperty(t,ge,{enumerable:false,value:this});if(e!==undefined)P(this,t,e);return t}internalBinaryRead(e,t,n,i){let r=i??this.create(),a=e.pos+t;while(e.pos<a){let[t,i]=e.tag();switch(t){case 11:r.cm=He.internalBinaryRead(e,e.uint32(),n,r.cm);break;default:let a=n.readUnknownField;if(a==="throw")throw new globalThis.Error(`Unknown field ${t}(wire type ${i})for ${this.typeName}`);let o=e.skip(i);if(a!==false)(a===true?s.onRead:a)(this.typeName,r,t,i,o)}}return r}internalBinaryWrite(e,t,n){if(e.cm)He.internalBinaryWrite(e.cm,t.tag(11,o.LengthDelimited).fork(),n).join();let i=n.writeUnknownFields;if(i!==false)(i==true?s.onWrite:i)(this.typeName,e,t);return t}}const mt=new pt;switch(i?.[1]){case"MainList":let Yt=mt.fromBinary(a);delete Yt.cm;a=mt.toBinary(Yt);break};break};break};q=newRawBody({header:Re,body:a});break};$response.body=q;break}})().catch((e=>{})).finally((()=>{switch($response){default:{if($response?.headers?.["content-encoding"])$response.headers["content-encoding"]="identity";$done($response);break};case undefined:{break}}}));function newRawBody({header:e,body:t},n=undefined){const i=n=="gzip"?1:n=="identity"?0:n==undefined?0:e?.[0]??0;const r=s(t.length);if(n=="gzip")t=pako.gzip(t);let a=new Uint8Array(e.length+t.length);a.set([i],0);a.set(r,1);a.set(t,5);return a;function s(e){let t=new ArrayBuffer(4);let n=new DataView(t);n.setUint32(0,e,false);return new Uint8Array(t)}}function URLs(e){return new class{constructor(e=[]){this.name="URL v1.0.2",this.opts=e,this.json={scheme:"",host:"",path:"",params:{}}}parse(e){let t=e.match(/(?<scheme>.+):\/\/(?<host>[^/]+)\/?(?<path>[^?]+)?\??(?<params>.*)?/)?.groups??null;return t?.path||(t.path=""),t?.params&&(t.params=Object.fromEntries(t.params.split("&").map((e=>e.split("="))))),t}stringify(e=this.json){return e?.params?e.scheme+"://"+e.host+"/"+e.path+"?"+Object.entries(e.params).map((e=>e.join("="))).join("&"):e.scheme+"://"+e.host+"/"+e.path}}(e)}